<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Zope | Jürgen Gmach</title>
<meta name=keywords content><meta name=description content><meta name=author content><link rel=canonical href=https://jugmac00.github.io/tags/zope/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://jugmac00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jugmac00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jugmac00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jugmac00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jugmac00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://jugmac00.github.io/tags/zope/index.xml><link rel=alternate hreflang=en href=https://jugmac00.github.io/tags/zope/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Zope"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://jugmac00.github.io/tags/zope/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Zope"><meta name=twitter:description content></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jugmac00.github.io/ accesskey=h title="Jürgen Gmach (Alt + H)">Jürgen Gmach</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://jugmac00.github.io/about/ title=about><span>about</span></a></li><li><a href=https://jugmac00.github.io/blog/ title=blog><span>blog</span></a></li><li><a href=https://jugmac00.github.io/til/ title=til><span>today-i-learned</span></a></li><li><a href=https://jugmac00.github.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://jugmac00.github.io/hiring/ title=hiring><span>hiring</span></a></li><li><a href=https://jugmac00.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Zope</h1></header><article class="post-entry tag-entry"><section class=entry-content><span title='2021-04-24 13:42:58 +0200 +0200'>April 24, 2021</span></section><header class=entry-header><h2><a aria-label="post link to How to Test Log Output With zope.testrunner" href=https://jugmac00.github.io/til/how-to-test-log-output-with-zope-testrunner/>How to Test Log Output With zope.testrunner</a></h2></header><section class=entry-content><p><a aria-label="post link to How to Test Log Output With zope.testrunner" href=https://jugmac00.github.io/til/how-to-test-log-output-with-zope-testrunner/>How to test log output with zope.testrunner? While pytest makes it very easy to work with log files via the caplog fixture, I was not aware how to test them with zope.testrunner, which is used for almost all Zope repositories.
When I asked during yesterday’s Zope sprint, I got no answer.
But coincidentally, I stumbled upon a broken doctest which… tests the log output of a function!
So… thanks for failing… I guess :-)...</a></p></section><footer class=entry-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/zope/>zope</a></li><li><a href=https://jugmac00.github.io/tags/zope.testrunner/>zope.testrunner</a></li><li><a href=https://jugmac00.github.io/tags/pytest/>pytest</a></li></ul></footer></article><article class="post-entry tag-entry"><section class=entry-content><span title='2021-04-19 11:38:06 +0200 +0200'>April 19, 2021</span></section><header class=entry-header><h2><a aria-label="post link to How Many Zope Repositories Are Compatible With Pypy?" href=https://jugmac00.github.io/til/how-many-zope-repositories-are-compatible-with-pypy/>How Many Zope Repositories Are Compatible With Pypy?</a></h2></header><section class=entry-content><p><a aria-label="post link to How Many Zope Repositories Are Compatible With Pypy?" href=https://jugmac00.github.io/til/how-many-zope-repositories-are-compatible-with-pypy/>Today, Johannes Raggam asked on the Plone/Zope community forum whether Zope is able to run on PyPy.
While I am not entirely sure, and I have some vague memories about potential problems with RestrictedPython, I can certainly grep the almost 300 Zope repositories for signs of PyPy support.
The best sign of PyPy support is IMHO that we run tests for it :-)
In order to grep in all repositories I use all-repos written by Anthony Sottile....</a></p></section><footer class=entry-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/zope/>zope</a></li><li><a href=https://jugmac00.github.io/tags/all-repos/>all-repos</a></li><li><a href=https://jugmac00.github.io/tags/pypy/>pypy</a></li></ul></footer></article><article class="post-entry tag-entry"><section class=entry-content><span title='2021-02-15 13:59:42 +0200 +0200'>February 15, 2021</span></section><header class=entry-header><h2><a aria-label="post link to What Is the Difference Between Transaction Abort and Transaction Doom" href=https://jugmac00.github.io/til/what-is-the-difference-between-transaction-abort-and-transaction-doom/>What Is the Difference Between Transaction Abort and Transaction Doom</a></h2></header><section class=entry-content><p><a aria-label="post link to What Is the Difference Between Transaction Abort and Transaction Doom" href=https://jugmac00.github.io/til/what-is-the-difference-between-transaction-abort-and-transaction-doom/>Zope is using the transaction package to manage - you guess - transactions.
More specifically, a transaction starts when Zope receives a request, and the transaction succeeds when the action triggered by the request works out.
When the action causes an exception, the transaction will be rolled back.
This means, usually you very rarely have to interfere with the transaction management manually.
Last week I was implementing a new XML-RPC API, which basically looks like the following code:...</a></p></section><footer class=entry-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/zope/>zope</a></li><li><a href=https://jugmac00.github.io/tags/transaction/>transaction</a></li></ul></footer></article><article class="post-entry tag-entry"><section class=entry-content><span title='2020-10-28 13:46:51 +0200 +0200'>October 28, 2020</span></section><header class=entry-header><h2><a aria-label="post link to How to Update All Zope Repositories at Once" href=https://jugmac00.github.io/til/how-to-update-all-zope-repositories-at-once/>How to Update All Zope Repositories at Once</a></h2></header><section class=entry-content><p><a aria-label="post link to How to Update All Zope Repositories at Once" href=https://jugmac00.github.io/til/how-to-update-all-zope-repositories-at-once/>Most or even all zopefoundation repositories use Travis for CI (As of May 2021, this is no longer true: we use GitHub Actions now).
While Travis offered Python 3.9 as a dev version (3.9-dev) for quite some time, support for 3.9 final took a while.
That’s why we decided to run Travis with Python 3.9-dev.
Meanwhile Travis finally offers support for Python 3.9 final, so we have to update all repositories, which would be super tedious by hand....</a></p></section><footer class=entry-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/all-repos/>all-repos</a></li><li><a href=https://jugmac00.github.io/tags/zope/>zope</a></li></ul></footer></article><article class="post-entry tag-entry"><section class=entry-content><span title='2020-10-09 13:26:36 +0200 +0200'>October 9, 2020</span></section><header class=entry-header><h2><a aria-label="post link to How to Access via WebDav" href=https://jugmac00.github.io/til/how-to-access-via-webdav/>How to Access via WebDav</a></h2></header><section class=entry-content><p><a aria-label="post link to How to Access via WebDav" href=https://jugmac00.github.io/til/how-to-access-via-webdav/>WebDav is a protocol, based on top of HTTP, that allows clients remote content authoring, such as creating, editing and deleting content.
The protocol itself is pretty old, dating back to the late 90ies.
While not really popular, even modern systems like NextCloud, OwnCloud, and also the widely-used NAS systems by Synology do support this standard - and also Zope!
How to activate WebDav support in Zope? The WebDav support in Zope had been temporarily removed, as Zope switched from the legacy ZServer to the standard WSGI approach, and WebDav was coupled to the ZServer, for no obvious reasons....</a></p></section><footer class=entry-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/zope/>zope</a></li><li><a href=https://jugmac00.github.io/tags/webdav/>webdav</a></li></ul></footer></article><article class="post-entry tag-entry"><section class=entry-content><span title='2020-10-05 13:33:57 +0200 +0200'>October 5, 2020</span></section><header class=entry-header><h2><a aria-label="post link to How to Develop Dependencies With Buildout" href=https://jugmac00.github.io/til/how-to-develop-dependencies-with-buildout/>How to Develop Dependencies With Buildout</a></h2></header><section class=entry-content><p><a aria-label="post link to How to Develop Dependencies With Buildout" href=https://jugmac00.github.io/til/how-to-develop-dependencies-with-buildout/>Given you have a decent sized project, with some dependencies…
How can you develop and test a dependency against your main project, when it is not yet published on PyPi?
Well, until recently, I relied on a strong test suite and mostly developed “blindly”.
When I wanted to see the result, I used Vim to directly edit the dependency in my virtual env.
There must be a better way And actually, there is and has been for more than a decade....</a></p></section><footer class=entry-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/zope/>zope</a></li><li><a href=https://jugmac00.github.io/tags/buildout/>buildout</a></li></ul></footer></article><article class="post-entry tag-entry"><section class=entry-content><span title='2020-09-29 13:40:28 +0200 +0200'>September 29, 2020</span></section><header class=entry-header><h2><a aria-label="post link to How to Setup Zope in Dev Mode" href=https://jugmac00.github.io/til/how-to-setup-zope-in-dev-mode/>How to Setup Zope in Dev Mode</a></h2></header><section class=entry-content><p><a aria-label="post link to How to Setup Zope in Dev Mode" href=https://jugmac00.github.io/til/how-to-setup-zope-in-dev-mode/>How to setup Zope in development mode? git clone git@github.com:zopefoundation/Zope.git cd Zope python3.8 -m venv .venv . .venv/bin/activate pip install -U pip pip install -e .[wsgi] -c https://zopefoundation.github.io/Zope/releases/master/constraints.txt … where
-e means editable, ie. developer mode the dot in .[wsgi] means here (similar to cd .. in bash) and [wsgi] means install the wsgi extras, which turns out to be Paste -c adds a constraints file, ie the versions of dependencies get pinned there After the installation, you need to configure Zope before you can run it, cf https://zope....</a></p></section><footer class=entry-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/zope/>zope</a></li></ul></footer></article><article class="post-entry tag-entry"><section class=entry-content><span title='2020-09-28 13:37:16 +0200 +0200'>September 28, 2020</span></section><header class=entry-header><h2><a aria-label="post link to How to Run a Single Test" href=https://jugmac00.github.io/til/how-to-run-a-single-test/>How to Run a Single Test</a></h2></header><section class=entry-content><p><a aria-label="post link to How to Run a Single Test" href=https://jugmac00.github.io/til/how-to-run-a-single-test/>While this seems to be no Zope specific question, as we all know how to narrow down the test selection with pytest (e.g. pytest -k pattern), Zope does not use pytest, but zope.testrunner.
Similar to pytest, also zope.testrunner offers some command line options, see https://zopetestrunner.readthedocs.io/en/latest/getting-started.html#some-useful-command-line-options-to-get-you-started
This means, in order to run a specific test, you can use the -t flag, which takes one or more regex expressions as input, e.g. -t some_test....</a></p></section><footer class=entry-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/zope/>zope</a></li><li><a href=https://jugmac00.github.io/tags/zope.testrunner/>zope.testrunner</a></li><li><a href=https://jugmac00.github.io/tags/testing/>testing</a></li></ul></footer></article><article class="post-entry tag-entry"><section class=entry-content><span title='2020-07-23 14:03:32 +0200 +0200'>July 23, 2020</span></section><header class=entry-header><h2><a aria-label="post link to Why Is Setuptools a Runtime Dependency" href=https://jugmac00.github.io/til/why-is-setuptools-a-runtime-dependency/>Why Is Setuptools a Runtime Dependency</a></h2></header><section class=entry-content><p><a aria-label="post link to Why Is Setuptools a Runtime Dependency" href=https://jugmac00.github.io/til/why-is-setuptools-a-runtime-dependency/>… or in other words…
Why is this snippet part of setup.py in all Zope projects?
install_requires = 'setuptools', This sounds weird at first, but there is good reason.
setuptools provides pkg_resources, and the latter is used in __init__.py, in order to declare a namespace package.
__import__('pkg_resources').declare_namespace(__name__) Still confused?
While pkg_resources-style namespace packages are no longer recommended for new projects, this approach was used to split large packages, and retrieve the contents from more than one location....</a></p></section><footer class=entry-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/zope/>zope</a></li><li><a href=https://jugmac00.github.io/tags/setuptools/>setuptools</a></li><li><a href=https://jugmac00.github.io/tags/packaging/>packaging</a></li></ul></footer></article><article class="post-entry tag-entry"><section class=entry-content><span title='2020-04-11 13:52:33 +0200 +0200'>April 11, 2020</span></section><header class=entry-header><h2><a aria-label="post link to How to Replace the Old With the New Decorator Syntax for Zope's Security Declarations" href=https://jugmac00.github.io/til/how-to-replace-the-old-with-the-new-decorator-syntax-for-zopes-security-declarations/>How to Replace the Old With the New Decorator Syntax for Zope's Security Declarations</a></h2></header><section class=entry-content><p><a aria-label="post link to How to Replace the Old With the New Decorator Syntax for Zope's Security Declarations" href=https://jugmac00.github.io/til/how-to-replace-the-old-with-the-new-decorator-syntax-for-zopes-security-declarations/>Zope’s security architecture is built upon security declarations, which scope can be either a method, several methods or even a complete class.
Until recently you usually declared the security for a method like this…
from AccessControl import getSecurityManager class Suggestions(SomeBaseClass): security = ClassSecurityInfo() security.declareProtected("View", "all_suggestions") def all_suggestions(): ... Then, when accessing this method, e.g. the logged in user’s role or group was checked against the security declaration.
One big disadvantage was that you could easily introduce typos....</a></p></section><footer class=entry-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/zope/>zope</a></li><li><a href=https://jugmac00.github.io/tags/vscode/>vscode</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://jugmac00.github.io/>Jürgen Gmach</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>