<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hugo and GitHub Pages - Welcome in the Land of Confusion | Jürgen Gmach</title><meta name=keywords content><meta name=description content="Yesterday, I migrated my blog to Hugo.
GitHub Pages While the migration was straight forward, I was a bit puzzled with the deployment process to GitHub.
For those who don&rsquo;t know yet, GitHub enables all users to have an own website, called GitHub Pages, with a URL like https://your-user-name.github.io.
Previously I used Lektor. The source code for my site lived in https://github.com/jugmac00/jugmac00.github.io.source, and was deployed by Lektor to https://github.com/jugmac00/jugmac00.github.io.
Easy enough."><meta name=author content><link rel=canonical href=https://jugmac00.github.io/blog/hugo-and-github-pages-welcome-in-the-land-of-confusion/><link crossorigin=anonymous href=/assets/css/stylesheet.96771a12b249af1ff464eabdaa85d1a5268a4379a9f2da62cfd409656ff0233b.css integrity="sha256-lncaErJJrx/0ZOq9qoXRpSaKQ3mp8tpiz9QJZW/wIzs=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://jugmac00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jugmac00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jugmac00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jugmac00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jugmac00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Hugo and GitHub Pages - Welcome in the Land of Confusion"><meta property="og:description" content="Yesterday, I migrated my blog to Hugo.
GitHub Pages While the migration was straight forward, I was a bit puzzled with the deployment process to GitHub.
For those who don&rsquo;t know yet, GitHub enables all users to have an own website, called GitHub Pages, with a URL like https://your-user-name.github.io.
Previously I used Lektor. The source code for my site lived in https://github.com/jugmac00/jugmac00.github.io.source, and was deployed by Lektor to https://github.com/jugmac00/jugmac00.github.io.
Easy enough."><meta property="og:type" content="article"><meta property="og:url" content="https://jugmac00.github.io/blog/hugo-and-github-pages-welcome-in-the-land-of-confusion/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-05-12T10:31:30+02:00"><meta property="article:modified_time" content="2021-05-12T10:31:30+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hugo and GitHub Pages - Welcome in the Land of Confusion"><meta name=twitter:description content="Yesterday, I migrated my blog to Hugo.
GitHub Pages While the migration was straight forward, I was a bit puzzled with the deployment process to GitHub.
For those who don&rsquo;t know yet, GitHub enables all users to have an own website, called GitHub Pages, with a URL like https://your-user-name.github.io.
Previously I used Lektor. The source code for my site lived in https://github.com/jugmac00/jugmac00.github.io.source, and was deployed by Lektor to https://github.com/jugmac00/jugmac00.github.io.
Easy enough."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Blogs","item":"https://jugmac00.github.io/blog/"},{"@type":"ListItem","position":3,"name":"Hugo and GitHub Pages - Welcome in the Land of Confusion","item":"https://jugmac00.github.io/blog/hugo-and-github-pages-welcome-in-the-land-of-confusion/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hugo and GitHub Pages - Welcome in the Land of Confusion","name":"Hugo and GitHub Pages - Welcome in the Land of Confusion","description":"Yesterday, I migrated my blog to Hugo.\nGitHub Pages While the migration was straight forward, I was a bit puzzled with the deployment process to GitHub.\nFor those who don\u0026rsquo;t know yet, GitHub enables all users to have an own website, called GitHub Pages, with a URL like https://your-user-name.github.io.\nPreviously I used Lektor. The source code for my site lived in https://github.com/jugmac00/jugmac00.github.io.source, and was deployed by Lektor to https://github.com/jugmac00/jugmac00.github.io.\nEasy enough.","keywords":[],"articleBody":"Yesterday, I migrated my blog to Hugo.\nGitHub Pages While the migration was straight forward, I was a bit puzzled with the deployment process to GitHub.\nFor those who don’t know yet, GitHub enables all users to have an own website, called GitHub Pages, with a URL like https://your-user-name.github.io.\nPreviously I used Lektor. The source code for my site lived in https://github.com/jugmac00/jugmac00.github.io.source, and was deployed by Lektor to https://github.com/jugmac00/jugmac00.github.io.\nEasy enough.\nTime for confusion For Hugo, this was not that straight forward. Some deployment tutorials mentioned a public dir in the same repository, others a gh-pages branch, the official documentation just shows an GitHub action with zero explanation, but actually no tutorial (that I found) mentioned explicitly you have to push all your templates into https://github.com/jugmac00/jugmac00.github.io. Possibly this is too obvious for the rest of the world, but it was not for me :-)\nAs my repository already contained the rendered HTML, still from Lektor, I did not want to start experiments.\nI re-read the GitHub pages help, and finally went into the settings of the GitHub repository.\nWhen you click on “Pages”, you can choose where from your GitHub Pages should be rendered, e.g. from a directory or another branch.\nNow it made click!\nWhen I had another look at Hugo’s GitHub Pages deployment action, I figured out, I need to create a new branch e.g. called main, in my existing repository, but without any commits from Lektor. How?\nEmpty branch Turns out the git checkout subcommand has an --orphan option.\ngit checkout --orphan main This creates a new branch, with zero commits!\nI then deleted all files generated by Lektor, moved my new Hugo source in there, added the GitHub Action from above mentioned documentation, git committed and pushed, and crossed fingers.\nAnd it worked out.\nThe action deployed to a new gh-pages branch, which I then had to choose from the repository’s setting.\nConclusion While working with Hugo is a breeze, the deployment process was super confusing.\nI created an issue on Hugo’s GitHub project. I wonder what the reaction will be.\n","wordCount":"345","inLanguage":"en","datePublished":"2021-05-12T10:31:30+02:00","dateModified":"2021-05-12T10:31:30+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jugmac00.github.io/blog/hugo-and-github-pages-welcome-in-the-land-of-confusion/"},"publisher":{"@type":"Organization","name":"Jürgen Gmach","logo":{"@type":"ImageObject","url":"https://jugmac00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://jugmac00.github.io accesskey=h title="Jürgen Gmach (Alt + H)">Jürgen Gmach</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://jugmac00.github.io/about/ title=about><span>about</span></a></li><li><a href=https://jugmac00.github.io/blog/ title=blog><span>blog</span></a></li><li><a href=https://jugmac00.github.io/til/ title=til><span>today-i-learned</span></a></li><li><a href=https://jugmac00.github.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://jugmac00.github.io/hiring/ title=hiring><span>hiring</span></a></li><li><a href=https://jugmac00.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Hugo and GitHub Pages - Welcome in the Land of Confusion</h1><div class=post-meta><span title="2021-05-12 10:31:30 +0200 +0200">May 12, 2021</span></div></header><div class=post-content><p>Yesterday, I migrated <a href=https://jugmac00.github.io/>my blog</a> to <a href=https://gohugo.io/>Hugo</a>.</p><h2 id=github-pages>GitHub Pages<a hidden class=anchor aria-hidden=true href=#github-pages>#</a></h2><p>While the migration was straight forward, I was a bit puzzled with the deployment process to GitHub.</p><p>For those who don&rsquo;t know yet,
GitHub enables all users to have an own website,
called <a href=https://pages.github.com/>GitHub Pages</a>,
with a URL like <a href=https://your-user-name.github.io>https://your-user-name.github.io</a>.</p><p>Previously I used <a href=https://www.getlektor.com/>Lektor</a>.
The source code for my site lived in <a href=https://github.com/jugmac00/jugmac00.github.io.source,>https://github.com/jugmac00/jugmac00.github.io.source,</a>
and was deployed by Lektor to <a href=https://github.com/jugmac00/jugmac00.github.io>https://github.com/jugmac00/jugmac00.github.io</a>.</p><p>Easy enough.</p><h2 id=time-for-confusion>Time for confusion<a hidden class=anchor aria-hidden=true href=#time-for-confusion>#</a></h2><p>For Hugo, this was not that straight forward.
Some deployment tutorials mentioned a <code>public</code> dir in the same repository,
others a <code>gh-pages</code> branch,
the <a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/#build-hugo-with-github-action>official documentation</a> just shows an GitHub action with zero explanation,
but actually no tutorial (that I found) mentioned explicitly you have to push all your templates into <a href=https://github.com/jugmac00/jugmac00.github.io>https://github.com/jugmac00/jugmac00.github.io</a>.
Possibly this is too obvious for the rest of the world,
but it was not for me :-)</p><p>As my repository already contained the rendered HTML, still from Lektor,
I did not want to start experiments.</p><p>I re-read the GitHub pages help,
and finally went into the settings of the GitHub repository.</p><p>When you click on &ldquo;Pages&rdquo;,
you can choose where from your GitHub Pages should be rendered,
e.g. from a directory or another branch.</p><p>Now it made click!</p><p>When I had another look at <a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/#build-hugo-with-github-action>Hugo&rsquo;s GitHub Pages deployment action</a>,
I figured out, I need to create a new branch e.g. called <code>main</code>,
in my existing repository, but without any commits from Lektor. How?</p><h2 id=empty-branch>Empty branch<a hidden class=anchor aria-hidden=true href=#empty-branch>#</a></h2><p>Turns out the <a href=https://git-scm.com/docs/git-checkout#Documentation/git-checkout.txt---orphanltnewbranchgt><code>git checkout</code></a> subcommand has an <code>--orphan</code> option.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git checkout --orphan main
</code></pre></div><p>This creates a new branch,
with zero commits!</p><p>I then deleted all files generated by Lektor,
moved my new Hugo source in there,
added the GitHub Action from above mentioned documentation,
git committed and pushed, and crossed fingers.</p><p>And it worked out.</p><p>The action deployed to a new <code>gh-pages</code> branch, which I then had to choose from the repository&rsquo;s setting.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>While working with Hugo is a breeze,
the deployment process was super confusing.</p><p>I created an <a href=https://github.com/gohugoio/hugo/issues/8525>issue</a> on Hugo&rsquo;s GitHub project.
I wonder what the reaction will be.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://jugmac00.github.io>Jürgen Gmach</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>