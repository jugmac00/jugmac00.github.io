<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Three Ways to Get Into Trouble or Welcome Back PageTemplateEngine | Jürgen Gmach</title><meta name=keywords content><meta name=description content="The web application server Zope has a very long history which dates back to the late &rsquo;90s.
Quoting Martijn Faassen:
 Zope must be one of the oldest Python codebases in the world that is still used outside the standard library.
 During its many years of existence the way a view gets rendered has changed.
Basically there are two supported template mechanisms:
 Document Template Markup Language (DTML) Zope Page Templates (ZPT)  DTML is pretty much outdated for more than a decade, but still in use for the Zope Management Interface."><meta name=author content><link rel=canonical href=https://jugmac00.github.io/blog/three-ways-to-get-into-trouble-or-welcome-back-pagetemplateengine/><link crossorigin=anonymous href=/assets/css/stylesheet.min.309a3942f890eb0930959205be1f692b2f0e85115a8b0190361a25a37e54fffa.css integrity="sha256-MJo5QviQ6wkwlZIFvh9pKy8OhRFaiwGQNholo35U//o=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://jugmac00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jugmac00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jugmac00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jugmac00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jugmac00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.82.0"><meta property="og:title" content="Three Ways to Get Into Trouble or Welcome Back PageTemplateEngine"><meta property="og:description" content="The web application server Zope has a very long history which dates back to the late &rsquo;90s.
Quoting Martijn Faassen:
 Zope must be one of the oldest Python codebases in the world that is still used outside the standard library.
 During its many years of existence the way a view gets rendered has changed.
Basically there are two supported template mechanisms:
 Document Template Markup Language (DTML) Zope Page Templates (ZPT)  DTML is pretty much outdated for more than a decade, but still in use for the Zope Management Interface."><meta property="og:type" content="article"><meta property="og:url" content="https://jugmac00.github.io/blog/three-ways-to-get-into-trouble-or-welcome-back-pagetemplateengine/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2019-11-26T13:58:44+02:00"><meta property="article:modified_time" content="2019-11-26T13:58:44+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Three Ways to Get Into Trouble or Welcome Back PageTemplateEngine"><meta name=twitter:description content="The web application server Zope has a very long history which dates back to the late &rsquo;90s.
Quoting Martijn Faassen:
 Zope must be one of the oldest Python codebases in the world that is still used outside the standard library.
 During its many years of existence the way a view gets rendered has changed.
Basically there are two supported template mechanisms:
 Document Template Markup Language (DTML) Zope Page Templates (ZPT)  DTML is pretty much outdated for more than a decade, but still in use for the Zope Management Interface."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Blogs","item":"https://jugmac00.github.io/blog/"},{"@type":"ListItem","position":3,"name":"Three Ways to Get Into Trouble or Welcome Back PageTemplateEngine","item":"https://jugmac00.github.io/blog/three-ways-to-get-into-trouble-or-welcome-back-pagetemplateengine/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Three Ways to Get Into Trouble or Welcome Back PageTemplateEngine","name":"Three Ways to Get Into Trouble or Welcome Back PageTemplateEngine","description":"The web application server Zope has a very long history which dates back to the late \u0026rsquo;90s.\nQuoting Martijn Faassen:\n Zope must be one of the oldest Python codebases in the world that is still used outside the standard library.\n During its many years of existence the way a view gets rendered has changed.\nBasically there are two supported template mechanisms:\n Document Template Markup Language (DTML) Zope Page Templates (ZPT)  DTML is pretty much outdated for more than a decade, but still in use for the Zope Management Interface.","keywords":[],"articleBody":"The web application server Zope has a very long history which dates back to the late ’90s.\nQuoting Martijn Faassen:\n Zope must be one of the oldest Python codebases in the world that is still used outside the standard library.\n During its many years of existence the way a view gets rendered has changed.\nBasically there are two supported template mechanisms:\n Document Template Markup Language (DTML) Zope Page Templates (ZPT)  DTML is pretty much outdated for more than a decade, but still in use for the Zope Management Interface.\nZPTs are basically XML/HTML pages in which special markup is embedded (TAL), which gets processed server side.\nThe processing is done by a template engine - this used to be the PageTemplateEngine.\nWith the release of Zope 4 this engine has been superseded by the Chameleon template engine, which is now activated per default.\nWhile Chameleon offers more flexibility and better performance, there may be reasons(TM) for using the old template engine.\nword of caution As of using Zope 4.1, the old PageTemplateEngine currently works, but it is deprecated and subject to be removed anytime.\nactivate PageTemplateEngine True to the Python motto “There should be one—and preferably only one—obvious way to do it.\" there is no obvious, but three rather obscure ways to get back the old engine - at least for the ZCML apprentice. ZCML stands for Zope Configuration Mark-up Language.\nZCML was introduced with Zope 3, and is used to wire together different parts of your application.\none Go to src/Products/PageTemplates/configure.zcml and comment out the configuration.\nThis can only be a temporary solution, as you should not modify an upstream package, e.g. Zope.\ntwo Make use of z3c.unconfigure and unconfigure the registration.\nthree Create an overrides.zcml with the following content:\n ","wordCount":"310","inLanguage":"en","datePublished":"2019-11-26T13:58:44+02:00","dateModified":"2019-11-26T13:58:44+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jugmac00.github.io/blog/three-ways-to-get-into-trouble-or-welcome-back-pagetemplateengine/"},"publisher":{"@type":"Organization","name":"Jürgen Gmach","logo":{"@type":"ImageObject","url":"https://jugmac00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://jugmac00.github.io accesskey=h title="Jürgen Gmach (Alt + H)">Jürgen Gmach</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://jugmac00.github.io/about/ title=about><span>about</span></a></li><li><a href=https://jugmac00.github.io/blog/ title=blog><span>blog</span></a></li><li><a href=https://jugmac00.github.io/til/ title=til><span>today-i-learned</span></a></li><li><a href=https://jugmac00.github.io/talks/ title=talks><span>talks</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Three Ways to Get Into Trouble or Welcome Back PageTemplateEngine</h1><div class=post-meta><p></p>November 26, 2019</div></header><div class=post-content><p>The web application server <a href=https://en.wikipedia.org/wiki/Zope>Zope</a> has a very long history which dates back to the late &rsquo;90s.</p><p>Quoting <a href=https://twitter.com/faassen/status/1197219574711803905>Martijn Faassen</a>:</p><blockquote><p>Zope must be one of the oldest Python codebases in the world that is still used outside the standard library.</p></blockquote><p>During its many years of existence the way a view gets rendered has changed.</p><p>Basically there are two supported template mechanisms:</p><ul><li>Document Template Markup Language (DTML)</li><li>Zope Page Templates (ZPT)</li></ul><p>DTML is pretty much outdated for more than a decade, but still in use for the Zope Management Interface.</p><p>ZPTs are basically XML/HTML pages in which special markup is embedded (<a href=https://en.wikipedia.org/wiki/Template_Attribute_Language>TAL</a>),
which gets processed server side.</p><p>The processing is done by a template engine - this used to be the <strong>PageTemplateEngine</strong>.</p><p>With the release of Zope 4 this engine has been superseded by the <a href=https://github.com/malthe/chameleon>Chameleon</a> template engine,
which is now activated per default.</p><p>While Chameleon offers more flexibility and better performance,
there may be reasons(TM) for using the old template engine.</p><h2 id=word-of-caution>word of caution<a hidden class=anchor aria-hidden=true href=#word-of-caution>#</a></h2><p>As of using Zope 4.1, the old PageTemplateEngine currently works,
but it is deprecated and subject to be <a href=https://github.com/zopefoundation/Zope/issues/104>removed anytime</a>.</p><h2 id=activate-pagetemplateengine>activate PageTemplateEngine<a hidden class=anchor aria-hidden=true href=#activate-pagetemplateengine>#</a></h2><p>True to the Python motto <strong>&ldquo;There should be one—and preferably only one—obvious way to do it."</strong>
there is no obvious,
but three rather obscure ways to get back the old engine - at least for the ZCML apprentice.
<a href=https://docs.plone.org/develop/addons/components/zcml.html>ZCML</a> stands for Zope Configuration Mark-up Language.</p><p>ZCML was introduced with Zope 3, and is used to wire together different parts of your application.</p><h3 id=one>one<a hidden class=anchor aria-hidden=true href=#one>#</a></h3><p>Go to <code>src/Products/PageTemplates/configure.zcml</code> and comment out the configuration.</p><p>This can only be a temporary solution, as you should not modify an upstream package, e.g. Zope.</p><h3 id=two>two<a hidden class=anchor aria-hidden=true href=#two>#</a></h3><p>Make use of <a href=https://pypi.org/project/z3c.unconfigure/>z3c.unconfigure</a> and unconfigure the registration.</p><h3 id=three>three<a hidden class=anchor aria-hidden=true href=#three>#</a></h3><p>Create an <code>overrides.zcml</code> with the following content:</p><pre><code>&lt;configure xmlns=&quot;http://namespaces.zope.org/zope&quot;
           xmlns:zcml=&quot;http://namespaces.zope.org/zcml&quot;&gt;

  &lt;!-- This registration disables Chameleon templates on Zope 4. --&gt;
  &lt;utility
    zcml:condition=&quot;installed chameleon&quot;
    component=&quot;zope.pagetemplate.pagetemplate.PageTemplateEngine&quot; /&gt;

&lt;/configure&gt;
</code></pre></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://jugmac00.github.io>Jürgen Gmach</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>