<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Flask Reuploaded | Jürgen Gmach</title><meta name=keywords content><meta name=description content="It all started with this error message:
File &#34;/Projects/xxx/venv/lib/python3.7/site-packages/flask_uploads.py&#34;, line 26, in <module> from werkzeug import secure_filename, FileStorage ImportError: cannot import name 'secure_filename' from 'werkzeug'' Trying to build my Flask application, the above error message was generated, as Werkzeug, a very important library in the Flask ecosystem, changed its API in version 1.0, back in February 2020.
This broke a lot of plugins.
Twitter thread
As my app relies on Flask-Uploads, I had a look at the problem and finally provided a pull request to the Flask-Uploads repository on GitHub."><meta name=author content><link rel=canonical href=https://jugmac00.github.io/blog/flask-reuploaded/><link crossorigin=anonymous href=/assets/css/stylesheet.min.309a3942f890eb0930959205be1f692b2f0e85115a8b0190361a25a37e54fffa.css integrity="sha256-MJo5QviQ6wkwlZIFvh9pKy8OhRFaiwGQNholo35U//o=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://jugmac00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jugmac00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jugmac00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jugmac00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jugmac00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.82.0"><meta property="og:title" content="Flask Reuploaded"><meta property="og:description" content="It all started with this error message:
File &#34;/Projects/xxx/venv/lib/python3.7/site-packages/flask_uploads.py&#34;, line 26, in <module> from werkzeug import secure_filename, FileStorage ImportError: cannot import name 'secure_filename' from 'werkzeug'' Trying to build my Flask application, the above error message was generated, as Werkzeug, a very important library in the Flask ecosystem, changed its API in version 1.0, back in February 2020.
This broke a lot of plugins.
Twitter thread
As my app relies on Flask-Uploads, I had a look at the problem and finally provided a pull request to the Flask-Uploads repository on GitHub."><meta property="og:type" content="article"><meta property="og:url" content="https://jugmac00.github.io/blog/flask-reuploaded/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2020-06-28T14:27:13+02:00"><meta property="article:modified_time" content="2020-06-28T14:27:13+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Flask Reuploaded"><meta name=twitter:description content="It all started with this error message:
File &#34;/Projects/xxx/venv/lib/python3.7/site-packages/flask_uploads.py&#34;, line 26, in <module> from werkzeug import secure_filename, FileStorage ImportError: cannot import name 'secure_filename' from 'werkzeug'' Trying to build my Flask application, the above error message was generated, as Werkzeug, a very important library in the Flask ecosystem, changed its API in version 1.0, back in February 2020.
This broke a lot of plugins.
Twitter thread
As my app relies on Flask-Uploads, I had a look at the problem and finally provided a pull request to the Flask-Uploads repository on GitHub."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Blogs","item":"https://jugmac00.github.io/blog/"},{"@type":"ListItem","position":3,"name":"Flask Reuploaded","item":"https://jugmac00.github.io/blog/flask-reuploaded/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Flask Reuploaded","name":"Flask Reuploaded","description":"It all started with this error message:\nFile \u0026#34;/Projects/xxx/venv/lib/python3.7/site-packages/flask_uploads.py\u0026#34;, line 26, in \u0026lt;module\u0026gt; from werkzeug import secure_filename, FileStorage ImportError: cannot import name \u0026#39;secure_filename\u0026#39; from \u0026#39;werkzeug\u0026#39;\u0026#39; Trying to build my Flask application, the above error message was generated, as Werkzeug, a very important library in the Flask ecosystem, changed its API in version 1.0, back in February 2020.\nThis broke a lot of plugins.\nTwitter thread\nAs my app relies on Flask-Uploads, I had a look at the problem and finally provided a pull request to the Flask-Uploads repository on GitHub.","keywords":[],"articleBody":"It all started with this error message:\nFile \"/Projects/xxx/venv/lib/python3.7/site-packages/flask_uploads.py\", line 26, in module from werkzeug import secure_filename, FileStorage ImportError: cannot import name 'secure_filename' from 'werkzeug'' Trying to build my Flask application, the above error message was generated, as Werkzeug, a very important library in the Flask ecosystem, changed its API in version 1.0, back in February 2020.\nThis broke a lot of plugins.\nTwitter thread\nAs my app relies on Flask-Uploads, I had a look at the problem and finally provided a pull request to the Flask-Uploads repository on GitHub.\nThis pull request was merged, but the maintainer deliberately chose not to release a new version to PyPI, though I even offered my help.\nYou can read his final argument here https://github.com/maxcountryman/flask-uploads/issues/29#issuecomment-614218327\nThe latest version on PyPi (0.2.1) is from 2016, and that one does not work with a current Flask/Werkzeug version.\nYou certainly could pin Flask-Uploads to a GitHub commit ID.\nI think this is inconvenient at least, and doing so caused me a lot of problems, as pinning a GitHub commit ID worked on my dev machine, but Travis CI was broken. For reasons.\nWhile I finally managed it “somehow”, I felt a bit sad for all those developers asking for help and a new release.\nFast forward six months, there is still no new release.\nI have thought about this situation a lot. On the one hand, the GitHub repository is kinda up to date (the test suite is broken, and some more… ), on the other hand there are many developers out there having trouble to fix their broken app.\nSo, yesterday I finally decided to fork this package, and after fixing the test suite and some more housekeeping, I released a new version to PyPI, most importantly with a fix to the broken Werkzeug import - and tons more.\nAs only the original maintainer has access to Flask-Uploads on PyPI, I had to create a new name: Flask-Reuploaded.\nOne of my main goals is to stay compatible with Flask-Uploads. It is even a drop-in replacement!\nThis means, instead of installing Flask-Uploads, you only have to install Flask-Reuploaded and your migration work is finished. You do not have to change a single line of code [as of 2021, a few necessary, backwards incompatible changes had to be made, but are documented in detail].\nThe package can be found at https://pypi.org/project/Flask-Reuploaded/\nAnd the repository lives at https://github.com/jugmac00/flask-reuploaded\nSpeaking of repository… While I have fixed the broken test suite, set up CI and more, there is still lots to do - especially beginner friendly tasks. If you ever wanted to contribute to open source, why not to the library you use? There are many open issues.\nWhen you now think… huh, this one guy… why should I use his package? Maybe he is too busy soon, too?\nThe company I work for relies on Flask-Reuploaded - so there is big motivation to keep it working. Also, I love Python and open source, and I am super open for other contributors.\nAs a matter of fact, my dream would be a Flask Umbrella organization, which the Flask plugin developers could join and share their workload more evenly. See my proposal to the Pallets project here: https://github.com/pallets/meta/issues/28 (As of 2021, the repo was deleted, but… there is big news coming!)\nThis all said… I am super thankful to Max and all the other contributors to this and other open source packages. I respect the decision not to release a package. The beauty of open source is choice. And now there is a choice when you want a working PyPI package.\nThanks!\nUpdate, 2020-06-28 Exactly 20 minutes after I have posted a similar, but shorter and more specific answer to one of the “current release is broken” issues on Flask-Uploads bug tracker, the maintainer of Flask-Uploads fired a series of actions:\n  he kindly answered to this one month old issue for the first time\n  he then marked my answer as off-topic, so it is hidden\n  he started to answering / closing all open issues, dating back til 2016\n  he created a new ticket and asked for help to automate releases to PyPi\n  Guess what? This is almost exactly the reaction I anticipated.\nOne fork, probably four hours of work, which I enjoyed a lot, and a very good looking solution for all users of either Flask-Uploads or Flask-Reuploaded is within reach.\nConcerning the call for help with the automated releases… I truly hope this will work out, and the many users of Flask-Uploads, which had problems for months, and probably never get to know Flask-Reuploaded, get a working app again.\nAnd Max, if you happen to read my blog any time…\n“If someone is so motivated…\" I was. I am no longer. I have a different mental model of how open source works.\n“This will allow the maintainers (including myself) to easily create releases without having to setup the local tooling to do so (truly a pain and not something I personally have the time for at the moment).\"\nThere is an excellent blog post out there on how to do releases to PyPI, by Hynek Schlawack: Sharing Your Labor of Love: PyPI Quick and Dirty\nBasically, you need a virtualenv and five minutes. That’s it. I know it. I did it. Twice.\n","wordCount":"882","inLanguage":"en","datePublished":"2020-06-28T14:27:13+02:00","dateModified":"2020-06-28T14:27:13+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jugmac00.github.io/blog/flask-reuploaded/"},"publisher":{"@type":"Organization","name":"Jürgen Gmach","logo":{"@type":"ImageObject","url":"https://jugmac00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://jugmac00.github.io accesskey=h title="Jürgen Gmach (Alt + H)">Jürgen Gmach</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://jugmac00.github.io/about/ title=about><span>about</span></a></li><li><a href=https://jugmac00.github.io/blog/ title=blog><span>blog</span></a></li><li><a href=https://jugmac00.github.io/til/ title=til><span>today-i-learned</span></a></li><li><a href=https://jugmac00.github.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://jugmac00.github.io/hiring/ title=hiring><span>hiring</span></a></li><li><a href=https://jugmac00.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Flask Reuploaded</h1><div class=post-meta>June 28, 2020</div></header><div class=post-content><p>It all started with this error message:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>File <span style=color:#e6db74>&#34;/Projects/xxx/venv/lib/python3.7/site-packages/flask_uploads.py&#34;</span>, line <span style=color:#ae81ff>26</span>, <span style=color:#f92672>in</span> <span style=color:#f92672>&lt;</span>module<span style=color:#f92672>&gt;</span>
<span style=color:#f92672>from</span> werkzeug <span style=color:#f92672>import</span> secure_filename, FileStorage
<span style=color:#a6e22e>ImportError</span>: cannot <span style=color:#f92672>import</span> name <span style=color:#e6db74>&#39;secure_filename&#39;</span> <span style=color:#f92672>from</span> <span style=color:#e6db74>&#39;werkzeug&#39;&#39;</span>
</code></pre></div><p>Trying to build my <code>Flask</code> application, the above error message was generated,
as <code>Werkzeug</code>, a very important library in the <code>Flask</code> ecosystem,
changed its API in version 1.0, back in February 2020.</p><p>This broke a lot of plugins.</p><p><img loading=lazy src=/images/flask-uploads-ronacher.png alt="Raging Ronacher"></p><p><a href=https://twitter.com/mitsuhiko/status/1225758711009902592>Twitter thread</a></p><p>As my app relies on <code>Flask-Uploads</code>,
I had a look at the problem
and finally provided a <a href=https://github.com/maxcountryman/flask-uploads/pull/28>pull request</a>
to the <code>Flask-Uploads</code> repository on GitHub.</p><p>This pull request was merged,
but the maintainer deliberately chose not to release a new version to PyPI,
though I even offered my help.</p><p>You can read his final argument here
<a href=https://github.com/maxcountryman/flask-uploads/issues/29#issuecomment-614218327>https://github.com/maxcountryman/flask-uploads/issues/29#issuecomment-614218327</a></p><p>The latest version on PyPi (0.2.1) is from 2016,
and that one does not work with a current Flask/Werkzeug version.</p><p>You certainly could pin <code>Flask-Uploads</code> to a GitHub commit ID.</p><p>I think this is inconvenient at least, and doing so caused me a lot of problems,
as pinning a GitHub commit ID worked on my dev machine, but Travis CI was broken.
For reasons.</p><p>While I finally managed it &ldquo;somehow&rdquo;,
I felt a bit sad for all those developers asking for help and a new release.</p><p><img loading=lazy src=/images/flask-uploads-travis.png alt=somehow></p><p>Fast forward six months, there is still no new release.</p><p>I have thought about this situation a lot.
On the one hand, the GitHub repository is kinda up to date (the test suite is broken, and some more&mldr; ),
on the other hand there are many developers out there having trouble to fix their broken app.</p><p>So, yesterday I finally decided to fork this package,
and after fixing the test suite and some more housekeeping,
I released a new version to PyPI,
most importantly with a fix to the broken <code>Werkzeug</code> import - and tons more.</p><p>As only the original maintainer has access to <code>Flask-Uploads</code> on PyPI,
I had to create a new name: <a href=https://pypi.org/project/Flask-Reuploaded/><code>Flask-Reuploaded</code></a>.</p><p>One of my main goals is to stay compatible with <code>Flask-Uploads</code>.
It is even a drop-in replacement!</p><p>This means, instead of installing <code>Flask-Uploads</code>,
you only have to install <code>Flask-Reuploaded</code> and your migration work is finished.
You do not have to change a single line of code
[as of 2021, a few necessary, backwards incompatible changes had to be made, but are documented in detail].</p><p>The package can be found at
<a href=https://pypi.org/project/Flask-Reuploaded/>https://pypi.org/project/Flask-Reuploaded/</a></p><p>And the repository lives at
<a href=https://github.com/jugmac00/flask-reuploaded>https://github.com/jugmac00/flask-reuploaded</a></p><p>Speaking of repository&mldr;
While I have fixed the broken test suite,
set up CI and more, there is still lots to do - especially beginner friendly tasks.
If you ever wanted to contribute to open source, why not to the library you use?
There are many <a href=https://github.com/jugmac00/flask-reuploaded/issues>open issues</a>.</p><p>When you now think&mldr; huh, this one guy&mldr; why should I use his package?
Maybe he is too busy soon, too?</p><p>The company I work for relies on <code>Flask-Reuploaded</code> - so there is big motivation to keep it working.
Also, I love Python and open source, and I am super open for other contributors.</p><p>As a matter of fact, my dream would be a <code>Flask Umbrella</code> organization,
which the Flask plugin developers could join and share their workload more evenly.
See my proposal to the Pallets project here:
<a href=https://github.com/pallets/meta/issues/28>https://github.com/pallets/meta/issues/28</a> (As of 2021, the repo was deleted, but&mldr; there is big news coming!)</p><p>This all said&mldr;
I am super thankful to Max and all the other contributors to this and other open source packages.
I respect the decision not to release a package.
The beauty of open source is <strong>choice</strong>.
And now there is a choice when you want a working <a href=https://pypi.org/project/Flask-Reuploaded/>PyPI package</a>.</p><p>Thanks!</p><h2 id=update-2020-06-28>Update, 2020-06-28<a hidden class=anchor aria-hidden=true href=#update-2020-06-28>#</a></h2><p>Exactly 20 minutes after I have posted a similar, but shorter and more specific answer to one of the
<a href=https://github.com/maxcountryman/flask-uploads/issues/33>&ldquo;current release is broken&rdquo;</a>
issues on <code>Flask-Uploads</code> bug tracker,
the maintainer of <code>Flask-Uploads</code> fired a series of actions:</p><ul><li><p>he <a href=https://github.com/maxcountryman/flask-uploads/issues/33#issuecomment-650776662>kindly answered</a> to this one month old issue for the first time</p></li><li><p>he then marked <a href=https://github.com/maxcountryman/flask-uploads/issues/33#issuecomment-650772815>my answer</a> as off-topic, so it is hidden</p></li><li><p>he started to answering / closing all open issues, dating back til 2016</p></li><li><p>he created a <a href=https://github.com/maxcountryman/flask-uploads/issues/39>new ticket</a> and asked for help to automate releases to PyPi</p></li></ul><p>Guess what? This is almost exactly the reaction I anticipated.</p><p>One fork, probably four hours of work, which I enjoyed a lot,
and a very good looking solution for all users of either <code>Flask-Uploads</code> or <code>Flask-Reuploaded</code> is within reach.</p><h3 id=concerning-the-call-for-help-with-the-automated-releases>Concerning the call for help with the automated releases&mldr;<a hidden class=anchor aria-hidden=true href=#concerning-the-call-for-help-with-the-automated-releases>#</a></h3><p>I truly hope this will work out, and the many users of <code>Flask-Uploads</code>,
which had problems for months,
and probably never get to know <code>Flask-Reuploaded</code>,
get a working app again.</p><p>And Max, if you happen to read my blog any time&mldr;</p><p><strong>&ldquo;If someone is so motivated&mldr;"</strong>
I was. I am no longer.
I have a different mental model of how open source works.</p><p><strong>&ldquo;This will allow the maintainers (including myself) to easily create releases without having to setup the local tooling to do so (truly a pain and not something I personally have the time for at the moment)."</strong></p><p>There is an excellent blog post out there on how to do releases to PyPI, by Hynek Schlawack: <a href=https://hynek.me/articles/sharing-your-labor-of-love-pypi-quick-and-dirty/>Sharing Your Labor of Love: PyPI Quick and Dirty</a></p><p>Basically, you need a virtualenv and five minutes.
That&rsquo;s it.
I know it.
<a href=https://github.com/jugmac00/flask-reuploaded/blob/master/PACKAGING.rst>I did it</a>.
<a href=https://pypi.org/project/Flask-Reuploaded/>Twice</a>.</p></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://jugmac00.github.io>Jürgen Gmach</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>