<!doctype html>
<head>
<meta name="google-site-verification" content="txmqQrMWeC-Q8aYQOBrl04hiVU-3jBbfBsj5vK3OWSE" />
<meta charset="utf-8">
<link rel="stylesheet" href="../static/style.css">
<title>Blog — Jürgen Gmach</title>
</head>
<body>
  <header>
    <h1>Jürgen Gmach</h1>
    <nav>
      <ul class="nav navbar-nav">
        <li><a href="../">About me</a></li>
        
          <li class="active"><a href="../blog/">Blog</a></li>
        
      </ul>
    </nav>
  </header>
  <div class="page">
    
  
    
  <div class="blog-post">
  
    <h1><a href="../blog/flask-reuploaded/">Flask-Reuploaded</a></h2>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/@jugmac00">Jürgen Gmach</a>
    
    on 2020-06-28
  </p>
  <p>It all started with this error message:</p>
<pre><code> File "/Projects/xxx/venv/lib/python3.7/site-packages/flask_uploads.py", line 26, in &lt;module&gt;
from werkzeug import secure_filename, FileStorage
ImportError: cannot import name 'secure_filename' from 'werkzeug''
</code></pre>
<p>Trying to build my <code>Flask</code> application, the above error message was generated,
as <code>Werkzeug</code>, a very important library in the <code>Flask</code> ecosystem,
changed its API in version 1.0, back in February 2020.</p>
<p>This broke a lot of plugins.</p>
<p><img src="../blog/flask-reuploaded/twitter-ronacher.png" alt="Alt-Text"></p>
<p><a href="https://twitter.com/mitsuhiko/status/1225758711009902592">Twitter thread</a></p>
<p>As my app relies on <code>Flask-Uploads</code>, I had a look at the problem
and finally provided a <a href="https://github.com/maxcountryman/flask-uploads/pull/28">pull request</a>
to the <code>Flask-Uploads</code> repository on GitHub.</p>
<p>This pull request was merged, but the maintainer deliberately chose not to release a new version to PyPi,
though I even offered my help.</p>
<p>You can read his final argument here
<a href="https://github.com/maxcountryman/flask-uploads/issues/29#issuecomment-614218327">https://github.com/maxcountryman/flask-uploads/issues/29#issuecomment-614218327</a></p>
<p>The latest version on PyPi (0.2.1) is from 2016,
and that one does not work with a current Flask/Werkzeug version.</p>
<p>You certainly could pin <code>Flask-Uploads</code> to a GitHub commit ID.</p>
<p>I think this is inconvenient at least, and doing so caused me a lot of problems,
as pinning a GitHub commit ID worked on my dev machine, but Travis CI was broken.
For reasons.</p>
<p>While I finally managed it <a href="https://user-images.githubusercontent.com/9895620/74611968-21140a00-5101-11ea-9280-4102f384b9a1.png">somehow</a>,
I felt a bit sad for all those developers asking for help and a new release.</p>
<p>Fast forward six months, there is still no new release.</p>
<p>I have thought about this situation a lot.
On the one hand, the GitHub repository is kinda up to date (the test suite is broken, and some more... ),
on the other hand there are many developers out there having trouble to fix their broken app.</p>
<p>So, yesterday I finally decided to fork this package,
and after fixing the test suite and some more housekeeping,
I released a new version to PyPi,
most importantly with a fix to the broken <code>Werkzeug</code> import - and tons more.</p>
<p>As only the original maintainer has access to <code>Flask-Uploads</code> on PyPi,
I had to create a new name:</p>
<p><a href="https://pypi.org/project/Flask-Reuploaded/"><code>Flask-Reuploaded</code></a>.</p>
<p>One of my main goals is to stay compatible with <code>Flask-Uploads</code>.
It even is a drop-in replacement!</p>
<p>This means, instead of installing <code>Flask-Uploads</code>,
you only have to install <code>Flask-Reuploaded</code> and your migration work is finished.
You do not have to change a single line of code.</p>
<p>The package is found here
<a href="https://pypi.org/project/Flask-Reuploaded/">https://pypi.org/project/Flask-Reuploaded/</a></p>
<p>And the repository is here
<a href="https://github.com/jugmac00/flask-reuploaded">https://github.com/jugmac00/flask-reuploaded</a></p>
<p>Speaking of repository, while I have fixed the broken test suite,
set up CI and more, there is still lots to do - especially beginner friendly tasks.
If you ever wanted to contribute to open source, why not to the library you use?
There are many <a href="https://github.com/jugmac00/flask-reuploaded/issues">open issues</a>.</p>
<p>When you now think... huh, this one guy... why should I use his package?
Maybe he is too busy soon, too?</p>
<p>The company I work for relies on <code>Flask-Reuploaded</code> - so there is big motivation to keep it working.
Also, I love Python and open source, and I am super open for other contributors.</p>
<p>As a matter of fact, my dream would be a <code>Flask Umbrella</code> organization,
which the Flask plugin developers could join and share their workload more evenly.
See my proposal to the Pallets project here:
<a href="https://github.com/pallets/meta/issues/28">https://github.com/pallets/meta/issues/28</a></p>
<p>This all said...
I am super thankful to Max and all the other contributors to this and other open source packages.
I respect the decision not to release a package.
The beauty of open source is <strong>choice</strong>.
And now there is a choice when you want a working <a href="https://pypi.org/project/Flask-Reuploaded/">PyPi package</a>.</p>
<p>Thanks!</p>

  </div>

  
    
  <div class="blog-post">
  
    <h1><a href="../blog/log-rotation-for-python-applications/">Log Rotation for Python Applications - Without killing them softly</a></h2>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/@jugmac00">Jürgen Gmach</a>
    
    on 2020-04-08
  </p>
  <p>A couple of days after a successful deployment of my <a href="https://zope.readthedocs.io/en/latest/">Zope 4</a> application, I noticed something worrisome.</p>
<p>Zope gets killed every night, shortly after midnight.</p>
<p>I use <a href="http://supervisord.org/">Supervisor</a>, which monitors the process and restarts it, so that's not the problem.</p>
<p>But there are two problems:</p>
<ul>
<li>I did not trigger this on purpose.</li>
<li>The cache of my app is cold, that means that my colleagues get slow response times for the first queries in the morning.</li>
</ul>
<h2>What's wrong?</h2>
<p>Thanks to version controlled <a href="https://batou.readthedocs.io/en/latest/">configuration management</a> it was not hard to pick up a trail of the problem.</p>
<p>The commit which looked most promising was one about introducing proper log rotation with <code>Logrotate</code>.</p>
<p><code>Logrotate</code> manages automatic rotation and compression of your log files.</p>
<p>Log rotation was setup to send a signal to Zope to close and re-open the log file as following:</p>
<pre><code>/srv/app/deployment/work/zope/var/log/instance*.log  {

postrotate
kill -USR2 $(cat /srv/app/deployment/work/zope/var/instance/Z4.pid)
endscript
}
</code></pre>
<p><code>kill</code> sounds scary at first, but it isn't, or let's say, it shouldn't be.</p>
<p>It just sends a signal to a process - and <code>USR2</code> happens to be a signal for which your application can use a customized reaction, e.g. log close and re-open.</p>
<p>Looking at Zope's documentation, this is exactly how it should look like - and it definitely used to work this way back then with Zope 2. No mentions in the Zope documentation about a change.</p>
<pre><code>SIGUSR2
  close and re-open all Zope log files (z2.log, event log, detailed log.) The
  common idiom after rotating Zope log files is::

    kill -USR2 `cat $ZOPE_HOME/var/Z2.pid`
</code></pre>
<p>This excerpt was available under <a href="https://zope.readthedocs.io/en/latest/INSTALL.html">https://zope.readthedocs.io/en/latest/INSTALL.html</a> - meanwhile it was updated.</p>
<p>So, this looks like a Zope bug, eh?</p>
<p>Minimal setup to reproduce it... yep, Zope dies.</p>
<p>Some back and forth between Zope's and Waitress' (WSGI server) maintainers about who should fix this, and... there is nothing to fix.</p>
<p><strong>Zope decided to drop signal handling</strong> with the 2 to 4 update, and Waitress can't do it as it does not handle log files.</p>
<h2>Excuse me, sir. What is the real problem here?</h2>
<p>When <code>Logrotate</code> archives the current log file, and creates a new one, the current app's process keeps the handle to the original file, and keeps logging into it, although there is a new one.</p>
<p>Usually, you can restart your app or send a special signal, like USR2 to your app to fix this problem, but as outlined above, both options do not work out great with my use case.</p>
<h2>So, what to do?</h2>
<p>Turns out, there are many options!</p>
<ul>
<li>log to a supervising process</li>
<li>use <code>Logrotate</code>'s <a href="https://jlk.fjfi.cvut.cz/arch/manpages/man/logrotate.8#Files_and_Folders"><code>copytruncate</code></a> directive </li>
<li>use Python's <a href="https://docs.python.org/3/library/logging.handlers.html#watchedfilehandler"><code>WatchedFileHandler</code></a></li>
</ul>
<p>Having used Python for more than a decade, I still get surprised by gems in the standard library I never heard of before. Like the <code>WatchedFileHandler</code>.</p>
<p>While all three options are valid, the <code>WatchedFileHAndler</code> just does what is needed here. Watch the file for a change, then close the old file stream and open a new one.</p>
<p>The final "configuration" of <code>Logrotate</code> is this simple:</p>
<pre><code>/srv/app/deployment/work/zope/var/log/*.log  {

}
</code></pre>

  </div>

  
    
  <div class="blog-post">
  
    <h1><a href="../blog/isort-and-pre-commit-a-friendship-with-obstacles/">isort and pre-commit - a friendship with obstacles</a></h2>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/jugmac00">Jürgen Gmach</a>
    
    on 2020-02-23
  </p>
  <blockquote><p><strong><em>NOTE:</em></strong> 
This post is not intended to be an exhaustive introduction to <code>pre-commit</code> and its hooks. Please visit <a href="https://pre-commit.com/">pre-commit.com</a> for a complete documentation.</p>
</blockquote>
<p>In a nutshell...</p>
<h2>pre-commit</h2>
<p>From its <a href="https://pre-commit.com/">website</a>:</p>
<blockquote><p>A framework for managing and maintaining multi-language pre-commit hooks.</p>
</blockquote>
<p>Very simplified this means, whenever you try to commit changes in your project (e.g. entering <code>git commit</code>), <code>pre-commit</code> runs all configured tools (e.g. linter, formatter, ...), and only if they run successfully, your commit will be executed - otherwise your commit will fail.</p>
<p>This is really great, as you will never ever forget to run your linter or other tools.</p>
<h2>isort</h2>
<p>One of those tools, which pre-commit can execute for you, is <code>isort</code> - short for "sort imports".</p>
<p>As the name suggests, this little helper sorts your import statements, both alphabetical and also PEP 8 compliant, means e.g. standard library imports are separated from the ones of third party tools. And I like this a lot!</p>
<p>A sample configuration for <code>pre-commit</code> to use <code>isort</code> could look like this - by the way, this is YAML:</p>
<pre><code>-   repo: https://github.com/timothycrosley/isort
    rev: 4.3.21
    hooks:
    -   id: isort
</code></pre>
<p>Also, you can customize <code>isort</code> to our liking, ie. every import on one line. This is just one of many configuration options.</p>
<p>And with the configuration options there comes the first problem.</p>
<h2>don't touch my migrations</h2>
<p>Whenever you run an application with a relational database, you probably also need to keep track of <code>migrations</code>, which usually consists of files with the diffs between two database schemes.</p>
<p>For my Flask app, those are stored in a subfolder called <code>migrations</code>.</p>
<p>No problem at all! Let's use <code>isort's</code> <code>skip</code> / <code>skip-glob</code> option (see  <code>isort's</code> <a href="https://github.com/timothycrosley/isort/wiki/isort-Settings">wiki</a>.</p>
<p>Looks easy enough.</p>
<p>After some <a href="https://github.com/timothycrosley/isort/issues/282">googling</a> - my first try would be something like this:</p>
<pre><code>[isort]
skip = migrations
</code></pre>
<p>Does not work. Hm, maybe I need to use globbing (wildcards)?</p>
<blockquote><p><strong><em>NOTE:</em></strong> 
I put <code>isort</code>'s configuration into my <code>tox.ini</code> file - you can certainly also use a dedicated <code>.isort.cfg</code> file. You'd have to replace the section <code>isort</code> with <code>settings</code> then.</p>
</blockquote>
<p>After some more googling I came up with this:</p>
<pre><code>[isort]
skip_glob = */migrations/*.py
</code></pre>
<p>Guess what? This also does not work. All my migration files still get changed by <code>isort</code>.</p>
<p>After some more investigation, I found  <a href="https://github.com/timothycrosley/isort/issues/885">https://github.com/timothycrosley/isort/issues/885</a>:</p>
<p>There is a new "never skip when passed a filename" behavior - which is... new. So, even if you put a file or a pattern into a <code>skip</code> option, it does not get skipped when passed to <code>isort</code> directly. And this is what I assume <code>pre-commit</code> is doing.</p>
<p>Ok, in the same issue a workaround was mentioned:
Use <code>--filter-files</code> on the command line, which I do not use, as I use <code>pre-commit</code>, but fortunately you can add it to your <code>pre-commit</code> hook configuration:</p>
<pre><code>  - repo: https://github.com/timothycrosley/isort
    rev: 4.3.21
    hooks:
    - id: isort
      args: [--filter-files]
</code></pre>
<p>It works!</p>
<blockquote><p><strong><em>NOTE:</em></strong> 
As an <a href="https://www.gitmemory.com/issue/pre-commit/mirrors-isort/9/511434587">alternative</a>, you could also add an <code>exclude: migrations/</code> statement in your pre-commit-config.yaml.</p>
</blockquote>
<p>Let me rather say... it worked, until I updated from <code>4.3.21</code> to <code>4.3.21-2</code> - there are no changelog entries available for this update, but there were tons of changes, including different behavior which files should be scanned.</p>
<p>With this update, all files gets processed by <code>isort</code>, including <code>.po</code>, <code>.rst</code>, <code>.json</code> and many more.</p>
<p>Ok, what can we do about it?</p>
<p>First, file an issue (<a href="https://github.com/timothycrosley/isort/issues/1154">https://github.com/timothycrosley/isort/issues/1154</a>).</p>
<p>Reading the excellent <code>pre-commit</code> documentation, it seems there are several options, but <a href="https://pre-commit.com/#creating-new-hooks"><code>filter by files</code></a> looks very promising.</p>
<p>The <code>files</code> statement supports regular expressions, so the new hook looks like this:</p>
<pre><code>  - repo: https://github.com/timothycrosley/isort
    rev: 4.3.21-2
    hooks:
    - id: isort
      args: [--filter-files]
      files: \.py$
</code></pre>
<p>And here we go... finally works as intended.</p>
<h2>post scriptum</h2>
<p>How does <code>isort</code> know how to sort the imports?</p>
<p>I don' t know, but it looks like Anthony Sottile knows a thing or two about this, and so he even wrote a tool which pre-polulates <code>isort's</code> <code>known_third_party</code> configuration, and thus makes <code>isort</code> even work better.</p>
<p>For more information and the <code>pre-commit</code> configuration please refer to <a href="https://github.com/asottile/seed-isort-config">https://github.com/asottile/seed-isort-config</a>.</p>
<h2>Update</h2>
<p>I could track down the the faulty behavior (<code>isort</code> also touches files which are not Python files) to a regression/packaging bug - <code>.pre-commit-hook.yaml</code> is broken for 4.3.21-2 - see the issue at <code>isort</code>'s <a href="https://github.com/timothycrosley/isort/issues/1154#issuecomment-587517806">bug tracker</a>.</p>

  </div>

  
    
  <div class="blog-post">
  
    <h1><a href="../blog/three-ways-to-get-into-trouble-or-welcome-back-pagetemplateengine/">Three ways to get into trouble or welcome back PageTemplateEngine</a></h2>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/jugmac00">Jürgen Gmach</a>
    
    on 2019-11-26
  </p>
  <p>The web application server <a href="https://en.wikipedia.org/wiki/Zope">Zope</a> has a very long history which dates back to the late '90s.</p>
<p>Quoting <a href="https://twitter.com/faassen/status/1197219574711803905">Martijn Faassen</a>:</p>
<blockquote><p>Zope must be one of the oldest Python codebases in the world that is still used outside the standard library.</p>
</blockquote>
<p>During its many years of existence the way a view gets rendered has changed.</p>
<p>Basically there are two supported template mechanisms:</p>
<ul>
<li>Document Template Markup Language (DTML)</li>
<li>Zope Page Templates (ZPT)</li>
</ul>
<p>DTML is pretty much outdated for more than a decade, but still in use for the Zope Management Interface.</p>
<p>ZPTs are basically XML/HTML pages in which special markup is embedded (<a href="https://en.wikipedia.org/wiki/Template_Attribute_Language">TAL</a>), which gets processed server side.</p>
<p>The processing is done by a template engine - this used to be the PageTemplateEngine.</p>
<p>With the release of Zope 4 this engine has been superseded by the <a href="https://github.com/malthe/chameleon">Chameleon</a> template engine, which is now activated per default.</p>
<p>While Chameleon offers more flexibility and better performance, there may be reasons(TM) for using the old template engine.</p>
<h2>word of caution</h2>
<p>As of using Zope 4.1, the old PageTemplateEngine currently works, but is deprecated and subject to be <a href="https://github.com/zopefoundation/Zope/issues/104">removed anytime</a>.</p>
<h2>activate pageTemplateEngine</h2>
<p>True to the Python motto <strong>"There should be one—and preferably only one—obvious way to do it."</strong> there is no obvious,  but three rather obscure ways to get back the old engine - at least for the ZCML apprentice. <a href="https://docs.plone.org/develop/addons/components/zcml.html">ZCML</a> stands for Zope Configuration Mark-up Language.</p>
<p>ZCML was introduced with Zope 3, and is used to wire together different parts of your application.</p>
<h3>one</h3>
<p>Go to <code>src/Products/PageTemplates/configure.zcml</code> and comment out the configuration.</p>
<p>This can only be a temporary solution, as you should not modify an upstream package, e.g. Zope.</p>
<h3>two</h3>
<p>Make use of <a href="https://pypi.org/project/z3c.unconfigure/">z3c.unconfigure</a> and unconfigure the registration.</p>
<h3>three</h3>
<p>Create an <code>overrides.zcml</code> with the following content:</p>
<pre><code>&lt;configure xmlns="http://namespaces.zope.org/zope"
           xmlns:zcml="http://namespaces.zope.org/zcml"&gt;

  &lt;!-- This registration disables Chameleon templates on Zope 4. --&gt;
  &lt;utility
    zcml:condition="installed chameleon"
    component="zope.pagetemplate.pagetemplate.PageTemplateEngine" /&gt;

&lt;/configure&gt;
</code></pre>

  </div>

  
    
  <div class="blog-post">
  
    <h1><a href="../blog/am-i-famous/">Am I famous?</a></h2>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/jugmac00">Jürgen Gmach</a>
    
    on 2019-05-29
  </p>
  <p>A couple of months ago, Brett Cannon, one of the better known Python core developers, announced on <a href="https://twitter.com/brettsky/status/1096578335428112384">Twitter</a> that he contributed to over 100 open source projects.</p>
<h2>first reaction</h2>
<p>Woohah! Congratulations!</p>
<h2>second reaction</h2>
<p>How did he know?</p>
<blockquote><p>Everytime I get a PR merged I record the repo's URL for a tool I created to analyze my contributions to OSS.</p>
</blockquote>
<p>Ah... k. I did not do that.</p>
<h2>third reaction</h2>
<p>To how many open source projects did I contribute? Well, I only started contributing recently, like one year ago or so... and as I said, I did not take any notes... but <strong>luckily</strong> nowadays like most open source development happens on Github. As far as I remember I only contributed to a couple projects which are not present on Github, and that was for <a href="https://bitbucket.org/flyingcircus/batou">batou</a> and <a href="http://trac.roundcube.net/">Roundcube</a>.</p>
<p>So, if only Github provided some API to query the data it stored about me... well, it does.</p>
<h2>say hello to graphql</h2>
<p><strong>GraphQL</strong> is a query language for web APIs. It was developed by Facebook, and according to rumors it will supersede REST in the near future.</p>
<p>Github kindly not only offers an API, but also an <a href="https://developer.github.com/v4/explorer/">in-browser IDE</a> (based on <a href="https://github.com/graphql/graphiql">GraphiQL</a>) to explore the data.</p>
<h2>say hello to graphiql</h2>
<p>When you first hit Github's instance of GraphiQL ( <a href="https://developer.github.com/v4/explorer/">https://developer.github.com/v4/explorer/</a> ), you will see something like this:</p>
<p><img src="../blog/am-i-famous/github-graphiql-start.png" alt="Alt-Text"></p>
<p>So, obviously, first you have to login with your Github credentials (green "Sign in with Github" button in the top right).</p>
<h2>first encounter</h2>
<p>When I first saw this page, I played around a bit and left - as I did not get what I wanted. Luckily, at last weekend's <strong>PyConWeb19</strong>, Arthur Bayr did a workshop on <a href="https://pyconweb.com/talks/25-05-2019/introduction-to-graphql-and-graphene">GraphQL and Graphene</a> - thanks a ton!</p>
<p>Now I am ready to explore my data!</p>
<h2>overview</h2>
<p>On the top left, there is room to enter the query.</p>
<p>On the right, the result will be shown.</p>
<p>On the far right, there is the small, but super helpful <strong>Docs</strong> button.</p>
<p>On the bottom left is something I did not use yet.</p>
<h2>iteration one</h2>
<p>After you have logged in, leave the query as is...</p>
<pre><code>query { 
  viewer { 
    login
  }
}
</code></pre>
<p>...  and just hit the play button above the "query field".</p>
<p>You should get a result similar to mine - but with your username</p>
<pre><code>{
  "data": {
    "viewer": {
      "login": "jugmac00"
    }
  }
}
</code></pre>
<h3>explanation</h3>
<ul>
<li><strong>query</strong> outside the curly braces is just a name</li>
<li><strong>viewer</strong> is a data type, and it happens to be the currently authenticated in user</li>
<li><strong>login</strong> is a subfield of <strong>viewer</strong></li>
</ul>
<p>How do I know this?</p>
<p>On the far right, there is the <strong>Docs</strong> button. Small button, but lots and lots of information! Actually, you can explore the complete API when you open the docs and follow the links.</p>
<h2>iteration two</h2>
<p>Either by reading the docs or by hitting <strong>CTRL+SPACE</strong> which triggers autocompletion when you are in the query box, you will eventually come across a subfield with name <strong>repositoriesContributedTo</strong> - that sounds fine!</p>
<blockquote><p><strong><em>NOTE:</em></strong><br>
You cannot query arbitrary data - all fields, subfields, parameters... have to be defined by the API provider.</p>
</blockquote>
<p>When you just enter the following...</p>
<pre><code>query { 
  viewer {
    repositoriesContributedTo
  } 
}
</code></pre>
<p>... right below <strong>repostoriesContributetTo</strong> there will be a red squiggly line. When hover over the word, you can read "Field .. must have a selection of subfields".</p>
<p>Whatever! The cool thing.. if you hit the <strong>play</strong> button anyway, the IDE autocompletes your query to...</p>
<pre><code>query { 
  viewer {
    repositoriesContributedTo {
      edges {
        node {
          id
        }
      }
    }
  } 
}
</code></pre>
<p>The result is... hm... an error message: "You must provide a <code>first</code> or <code>last</code> value to properly paginate the <code>repositoriesContributedTo</code> connection."</p>
<p>Ok, let's do this.</p>
<h2>iteration three</h2>
<p>Generally speaking, it is a very good idea to force pagination on all APIs, which return lists - another thing I learned at PyConWeb19 - no slides, but there is a video from another conference: <a href="https://www.youtube.com/watch?v=WXSfE2rE3bM">Tech bankruptcy: Looking back on a decade of bad decision making</a></p>
<p>The mentioned <strong>value</strong> is actually a parameter, and parameters are put into parenthesis behind a (sub)fieldname, just like...</p>
<pre><code>query { 
  viewer {
    repositoriesContributedTo(first: 100) {
      edges {
        node {
          id
        }
      }
    }
  } 
}
</code></pre>
<p>If you only type <strong>first</strong>, you get a friendly reminder to provide a number, which must not be greater than 100.</p>
<p>The result...</p>
<pre><code>{
  "data": {
    "viewer": {
      "repositoriesContributedTo": {
        "edges": [
          {
            "node": {
              "id": "MDEwOlJlcG9zaXRvcnk2OTI2NTQ="
            }
          },
...
</code></pre>
<p>... does not look to bad, but not very human readable.</p>
<h2>iteration four</h2>
<p>If you replace <strong>id</strong> with <strong>nameWithOwner</strong> (via API exploration STRG+SPACE or from the docs), you'll get much better data:</p>
<pre><code>query { 
  viewer {
    repositoriesContributedTo(first: 100) {
      edges {
        node {
          nameWithOwner
        }
      }
    }
  } 
}
</code></pre>
<p>The result...</p>
<pre><code>{
  "data": {
    "viewer": {
      "repositoriesContributedTo": {
        "edges": [
          {
            "node": {
              "nameWithOwner": "python-babel/flask-babel"
            }
          },
          {
            "node": {
              "nameWithOwner": "malthe/chameleon"
            }
          },
...
</code></pre>
<p>But we want the total number of contributions.</p>
<h2>iteration five</h2>
<p>As I learned at the workshop, either the server or the client has to implement some count or sum functions, as you can only query what is offered (or process it client side).</p>
<p>So, let's have another look, what <strong>repositoriesContributedTo</strong> has to offer...</p>
<p>If you click on <strong>repositoriesContributedTo</strong> and then on <strong>RepositoryConnection!</strong> in the <strong>Docs</strong>, you'll see <strong>totalCount</strong> -  nice! And also, you'll see <strong>nodes</strong> - which can simplify the "first get all edges and then the corresponding nodes" syntax.</p>
<pre><code>query { 
  viewer {
    repositoriesContributedTo(first: 100) {
        totalCount
        nodes {
          nameWithOwner
      }
    }
  } 
}
</code></pre>
<p>The result...</p>
<pre><code>{
  "data": {
    "viewer": {
      "repositoriesContributedTo": {
        "totalCount": 66,
        "nodes": [
          {
            "nameWithOwner": "python-babel/flask-babel"
          },
          {
            "nameWithOwner": "malthe/chameleon"
          },
...
</code></pre>
<p>Very nice.. except... also proprietary (private) repositories are listed...</p>
<h2>iteration six</h2>
<p>Visiting the docs again, <strong>repositoriesContributedTo</strong> offers a <strong>privacy</strong> parameter.</p>
<pre><code>query { 
  viewer {
    repositoriesContributedTo(first: 100, privacy: PUBLIC) {
        totalCount
        nodes {
          nameWithOwner
      }
    }
  } 
}
</code></pre>
<p>The final result...</p>
<pre><code>{
  "data": {
    "viewer": {
      "repositoriesContributedTo": {
        "totalCount": 54,
        "nodes": [
          {
            "nameWithOwner": "python-babel/flask-babel"
          },
          {
            "nameWithOwner": "malthe/chameleon"
          },
...
</code></pre>
<h2>what's left</h2>
<p>First, once again, thank you very much Arthur for teaching me the basics of <strong>GraphQL</strong>!</p>
<p>Now it is up to the reader to explore the API further... oh wait.. what is the <strong>includeUserRepositories</strong> parameter doing...</p>
<p>Damn! I missed to include my very own projects! :-)</p>
<h2>notes</h2>
<p>I presented this topic as a lightning talk at <a href="https://www.meetup.com/de-DE/Mobile-Stammtisch-GDG-Regensburg/events/266429981/">Mobile Stammtisch/GDG Regensburg</a> on 12. December 2019.</p>
<h2>updates</h2>
<p>2019-12-28</p>
<ul>
<li>add notes about lightning talk</li>
</ul>

  </div>

  
    
  <div class="blog-post">
  
    <h1><a href="../blog/pyconweb-2019/">Came for the talks, stayed for the raffles</a></h2>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/jugmac00">Jürgen Gmach</a>
    
    on 2019-05-27
  </p>
  <h2>summary of pyconweb 2019</h2>
<p>F... awesome!</p>
<h2>talks and workshops</h2>
<p>I tried to collect all slides from Twitter and Telegram - in case I missed some, please drop me a line <a href="https://twitter.com/jugmac00">@jugmac00</a>.</p>
<h3>Saturday, 25 May 2019</h3>
<ul>
<li>Building robust APIs</li>
<li>Tornado Web Services on AsyncIO</li>
<li>Bocadilla, or how I built an open source async web framework<ul>
<li><a href="https://www.dropbox.com/s/7z4kde2kjawoc54/pyconweb-slides.pdf?dl=0">slides@Dropbox</a> | <a href="https://github.com/florimondmanca/talks/blob/master/2019_05_25-bocadillo_pyconweb2019.pdf">slides@Github</a></li>
</ul>
</li>
<li>Introduction to GraphQL and Graphene<ul>
<li><a href="https://github.com/Speedy1991/graphql_workshop">source</a></li>
</ul>
</li>
<li>Hello to the World in 8 Web Frameworks<ul>
<li><a href="https://noti.st/aaronbassett/lK9Ah7/hello-to-the-world-in-8-web-frameworks-micro-batteries-included-async">slides and video</a></li>
<li><a href="https://twitter.com/aaronbassett">@aaronbassett</a></li>
</ul>
</li>
<li>Life without passwords</li>
<li>The dos and don'ts of task queues</li>
<li>An introduction to D3.js for data visualization</li>
<li>Matrix: Building a decentralized messaging plattform using Python and Twisted</li>
<li>"Where are the keys?" Solving day-to-day Problems using Tech<ul>
<li><a href="https://www.slideshare.net/mobile/nithishrw/where-are-the-keys-solving-daytoday-problems-using-tech">slides</a></li>
</ul>
</li>
<li>Teaching how to start developing web applications with Python</li>
<li>Dependency Injection in Python: Lessons Learned from Enterprise Web Development</li>
<li>Using Python, Matrix and TensorFlow to analyse the content of messages</li>
<li>Documentation in practice</li>
<li>Testing network interactions in Python<ul>
<li><a href="https://t.co/Rq5Lf5yFm0">slides</a></li>
<li><a href="https://github.com/Stranger6667/testing-network">example code</a></li>
<li><a href="https://twitter.com/Stranger6667">@Stranger6667</a></li>
</ul>
</li>
<li>Your Name is Invalid!<ul>
<li><a href="https://twitter.com/eumiro">@eumiro</a></li>
</ul>
</li>
</ul>
<h3>Sunday, 26 May 2019</h3>
<ul>
<li>New web platform security features for modern webapps</li>
<li>TurboGears, 10+ years of redesigning a web framework</li>
<li>What do travel, food &amp; health websites have in common? Auditing websites &amp; apps for privacy leaks<ul>
<li><a href="https://www.slideshare.net/konarkmodi/pyconweb-2019-auditing-websites-apps-for-privacy-leaks-147658330">slides</a></li>
<li><a href="https://twitter.com/konarkmodi">@konarkmodi</a></li>
</ul>
</li>
<li>Web Infrastructure Management made easy with Terraform</li>
<li>Testing Python security<ul>
<li><a href="https://speakerdeck.com/jmortega/testing-python-security-pyconweb">slides</a></li>
<li><a href="https://twitter.com/jmortegac">@jmortegac</a></li>
</ul>
</li>
<li>Introduction to Cython</li>
<li>Real world Graphene: lessons learned from building a GraphQL API on top of a large Django project</li>
<li>An alternative approach to Plone theming<ul>
<li><a href="https://de.slideshare.net/santonelli/alternative-approach-to-plone-theming-pyconweb-2019">slides</a></li>
<li><a href="https://twitter.com/stefanantonelli">@stefanantonelli</a></li>
</ul>
</li>
<li>Is Django too complicated?</li>
<li>Creating Crazy Robotic Librarians</li>
<li>Tech bankruptcy: Looking back on a decade of bad decision making</li>
<li>Using AI to Power Your Images<ul>
<li><a href="https://www.slideshare.net/dougsillars/ai-powered-images">slides</a></li>
</ul>
</li>
<li>Kubernetes Workshop</li>
<li>Managing the charge process for fleets of electric vehicles using Python and OCPP</li>
<li>Context matters: producing more useful logs with Python<ul>
<li><a href="https://speakerdeck.com/fergalwalsh/context-matters-more-useful-logging-with-python">slides</a></li>
</ul>
</li>
<li>Augmented and virtual reality on the web<ul>
<li><a href="https://www.slideshare.net/dougsillars/a-rt-gallery-pyconweb">slides</a></li>
</ul>
</li>
</ul>
<h2>post scriptum</h2>
<p>Thanks for the <strong>Echo Dot</strong>! I have not yet dared to open the pandora's box, but I will!</p>
<h2>updates</h2>
<p>2019-06-03</p>
<ul>
<li>add link to slides for "Testing Python security"
2019-05-28</li>
<li>add link to slides for "Auditing websites.."</li>
<li>remove wrong link to Sunday's keynote</li>
<li>add another link to slides for the "Bocadillo talk"</li>
</ul>

  </div>

  
    
  <div class="blog-post">
  
    <h1><a href="../blog/chrome-no-longer-shows-saved-passwords/">Chrome no longer shows saved passwords</a></h2>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/jugmac00">Jürgen Gmach</a>
    
    on 2019-05-20
  </p>
  <p>Concerning security and privacy, you either can get stalled because you can't get it perfect right from the beginning, or you improve over time.</p>
<p>I prefer the latter one. And concerning <strong>password security</strong> I go with Troy Hunt: <a href="https://www.troyhunt.com/password-managers-dont-have-to-be-perfect-they-just-have-to-be-better-than-not-having-one/">Password managers don't have to be perfect, they just have to be better than not having one</a>.</p>
<p>And actually the password manager of a browser is already a password manager. I would not use it for very important passwords, but it is absolutely fine for those dozens of dozens forum logins and so on. Currently, I still manage the more important passwords with <a href="https://www.veracrypt.fr/en/Home.html">VeraCrypt</a> - which is not that comfortable, but does its job.</p>
<h2>works fine except when it does not</h2>
<p>So, Google Chrome's password manager works fine for me... except when it does not.</p>
<p>Chrome stopped showing the saved passwords - from one day to another. I can't recall whether it was the <a href="https://fedoramagazine.org/upgrading-fedora-28-fedora-29/">Fedora 28 -&gt; 29 Upgrade</a> or maybe a Chrome update.</p>
<p>Anyway - it is extremely annoying to lookup passwords for every forum and and other sites which requires a login.</p>
<h2>the easy fix</h2>
<p>As I sync <del>everything</del> my profile with Google (hum, this sounds like something I should reevaluate some time) it is just a matter of deleting the broken profile and restarting <strong>Chrome</strong>.</p>
<pre><code>$ cd /home/jugmac00/.config
$ rm -rf google-chrome
</code></pre>
<p>It is as simple as that. And sure, I experience many more rough edges since I migrated to a Linux desktop, but I always feel like I keep the control and every problem is very easily fixable.</p>

  </div>

  
    
  <div class="blog-post">
  
    <h1><a href="../blog/recap-day-three-and-wrap-up-of-zope-spring-cleaning/">Recap day three and wrap up of &#34;Zope spring cleaning&#34;</a></h2>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/jugmac00">Jürgen Gmach</a>
    
    on 2019-05-10
  </p>
  <p>This blog post is work in progess... much more to come - but the train is only 10 minutes late (uncommon in Germany :-) ) , so I am not able finish the blog post now.</p>
<h2>tl/dr - what a ride!</h2>
<ul>
<li>today there was the final release of Zope 4! see <a href="https://blog.gocept.com/2019/05/10/celebration-zope-4-final-release/">blog post @gocept</a></li>
<li>Michael / @gocept announced the <a href="https://blog.gocept.com/2019/05/10/zope-roadmap/">roadmap</a> for Zope 2.13, Zope 4 and Zope 5</li>
</ul>
<h2>progress on day 3</h2>
<p>The main effort of everybody at the sprint was to wrap up all loose ends, finalize what one started, and of course get Zope 4 final released!</p>
<p>As there was no final standup, I try to list what I picked up...</p>
<ul>
<li>Michael<ul>
<li>finish and publish the above mentioned blog posts</li>
<li>trying to not get lost with those massive incoming GitHub updates</li>
<li>preparing and finally publishing the release of Zope 4</li>
<li>had a deeper look into the "allowed attributes" ticket together with Steffen; a safe last minute fix was not possible</li>
<li>even found time to review some open pull requests and to give me a helping hand for a test setup</li>
</ul>
</li>
<li>Jeremy<ul>
<li>finished enabling <a href="https://github.com/zopefoundation/zc.recipe.testrunner/pull/3">support for Python 3</a> for the zc.recipe.testrunner</li>
</ul>
</li>
<li>Steffen<ul>
<li>made up his mind about <a href="https://github.com/zopefoundation/Zope/issues/617">how to improve the speed for the Windows tests</a></li>
</ul>
</li>
<li>Daniel<ul>
<li><a href="https://github.com/zopefoundation/Products.ZCatalog/pull/77">improved styling</a> of the ZCatalog</li>
</ul>
</li>
<li>Jens Klein<ul>
<li>updated <a href="https://github.com/zopefoundation/Zope/pull/608">ZODB migration story</a></li>
<li>oh noes! announced the news that <strong>Plone</strong> - for some cases - can't yet use <strong>Zope 4</strong> - info came from Philip Bauer, cf <a href="https://github.com/zopefoundation/Zope/pull/610">ticket "allowed attributes"</a></li>
</ul>
</li>
<li>Jens Hinghaus<ul>
<li>got his pull request merged for <a href="https://github.com/zopefoundation/Zope/pull/605">fixing the ZMI serarch bug</a></li>
</ul>
</li>
<li>Jürgen<ul>
<li>update <a href="https://zope.readthedocs.io/en/latest/zdgbook/ObjectPublishing.html#xml-rpc">section about XML-RPC</a> of the Zope developer's guide, which also was the last section of Chapter 4 - which I started updating a whopping 8 months ago!!</li>
<li>started working on Chapter 5 <a href="https://zope.readthedocs.io/en/latest/zdgbook/Products.html">Zope Products</a></li>
<li>....</li>
</ul>
</li>
</ul>
<p>Again, Jens Vagelpohl, Marius and Dieter and maybe some more guys I possibly missed, supported the sprint massively from remote!</p>
<h2>more news</h2>
<p>There are some more news about <a href="https://community.plone.org/t/zope-contributor-agreement-process/8495">merging the Zope into the Plone foundation</a>.</p>

  </div>

  
    
  <div class="blog-post">
  
    <h1><a href="../blog/recap-day-two-of-zope-spring-cleaning/">Recap day two of &#34;Zope spring cleaning&#34;</a></h2>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/jugmac00">Jürgen Gmach</a>
    
    on 2019-05-10
  </p>
  <p>Very brief recap, as I want to spend the remaining time with some more documentation updates.</p>
<h2>progress</h2>
<ul>
<li>Jens Hinhaus<ul>
<li><a href="https://github.com/zopefoundation/Zope/pull/605">Fix bug in ZMI search</a></li>
<li><a href="https://github.com/zopefoundation/tempstorage/pull/11">improve tempstorage fix</a></li>
</ul>
</li>
<li>Steffen<ul>
<li>finished the documenation for the <a href="https://github.com/zopefoundation/Zope/issues/575">Nonsensical path issue</a></li>
<li>had some fun with getting <a href="https://github.com/zopefoundation/Zope/pull/613">AppVeyor</a> up and running for <strong>Zope</strong></li>
</ul>
</li>
<li>Daniel<ul>
<li><a href="https://github.com/zopefoundation/Products.ZCatalog/pull/75">fixed a bug in ZCatalog</a> (sorting did not work); migrated a DTML template to zpt</li>
</ul>
</li>
<li>Jeremy<ul>
<li>continued his work on <a href="https://github.com/zopefoundation/zc.recipe.testrunner/pull/3">zc.recipe.testrunner</a></li>
</ul>
</li>
<li>Jens Klein with Martin<ul>
<li>released <a href="https://pypi.org/project/zodbupdate">zodbupdate</a></li>
<li>released <a href="https://pypi.org/project/zodbverify/">zodbverify</a></li>
<li>opened a <a href="https://github.com/zopefoundation/Zope/pull/608">pull request</a> for the ZODB migration story</li>
</ul>
</li>
<li>Michael<ul>
<li>prepared a blog post for the Zope roadmap</li>
<li>prepared a blog post for the final release of Zope 4</li>
<li>released some more packages</li>
<li>is about preparing the final release of Zope 4!!!</li>
</ul>
</li>
<li>Jürgen<ul>
<li>filed a <a href="https://github.com/zopefoundation/Zope/issues/602">bug about a wrong path</a> when generating documentation locally</li>
<li>added a <a href="https://github.com/zopefoundation/Zope/issues/568">warning box</a> when using <strong>records</strong></li>
<li>updated <a href="file:///home/jugmac00/Projects/Zope/docs/_build/html/zdgbook/ObjectPublishing.html#exceptions-and-transactions">Exceptions and Transactions</a> in the Zope developer guide</li>
</ul>
</li>
</ul>
<p>Again, Jens Vagelpohl, Dieter, Marius and Jason very actively contributed from remote.</p>
<p>P.S.: I will update this blog post when I sit in the train back home... let's get Zope 4 ready to be released!</p>
<h2>updates</h2>
<p>2019-05-10</p>
<ul>
<li>add some links to pull requests and packages</li>
<li>fixed my mix up of "zodbmigrate" -&gt; "zodbverify"</li>
</ul>

  </div>

  
    
  <div class="blog-post">
  
    <h1><a href="../blog/recap-of-the-first-day-of-saltlabs-sprint-zope-spring-cleaning/">Recap day one of &#34;Zope spring cleaning&#34;</a></h2>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/jugmac00">Jürgen Gmach</a>
    
    on 2019-05-09
  </p>
  <p><a href="https://www.meetup.com/de-DE/Zope-Sprint/events/259042717/">More infos about the sprint</a></p>
<ul>
<li>10 local sprinters</li>
<li>2 remote sprinters (Jens Vagelpohl and Dieter Maurer)</li>
</ul>
<h2>progress</h2>
<ul>
<li>Steffen<ul>
<li>had lots of fun with <a href="https://github.com/zopefoundation/Zope/issues/575">Nonsensical Path Infos</a></li>
<li>had a look at some of the open documentation tickets</li>
</ul>
</li>
<li>Jens Klein / Martin Häcker<ul>
<li>created a <a href="https://github.com/zopefoundation/zodbupdate/pull/15">pull request</a> to improve the zodpupdate script</li>
<li>created / extracted <a href="https://github.com/plone/zodbverify">plone/zodbverify</a> which can be used to check ZODB before the Python 2 -&gt; 3 migration</li>
</ul>
</li>
<li>Jeremy<ul>
<li>worked on porting recipe.testrunner to Python 3 and had some <em>fun</em> with doctests</li>
</ul>
</li>
<li>Nilo<ul>
<li>worked on an issue for RestrictedPython</li>
<li>is about fixing a regression in ZCatalog, where sorting does no longer work</li>
</ul>
</li>
<li>Jens Hinghaus<ul>
<li>worked on <a href="https://github.com/zopefoundation/tempstorage/pull/11">tempstorage</a></li>
<li>found and filed a bug in ZMI when using search</li>
</ul>
</li>
<li>Michael<ul>
<li>is about preparing the roadmap for the final release of Zope 4 (yee-haw)</li>
<li>made a ton of releases for packages from the Zope universe</li>
<li>spread rumors that the release date of <strong>Zope 5</strong> won't be in the very far future</li>
</ul>
</li>
<li>Jürgen (me)<ul>
<li>found <a href="https://github.com/zopefoundation/Products.ZCatalog/pull/73#issuecomment-490485033">Dieter's comment</a> about why so many Travis builds break with Python 3.8; =&gt; clear cache and restart build, did this for lots of broken builds</li>
<li>revised the subsection about "Exceptions" of the <strong>Zope developer's guide</strong> and found and filed a <a href="https://github.com/zopefoundation/zExceptions/issues/8">bug</a> in zExceptions; also experienced some strange behaviour with custom exceptions which inherit from <strong>BaseException</strong> (don't do this at home) with waitress</li>
</ul>
</li>
</ul>
<p>Also, Jens Vagelpohl and Dieter Maurer contributed a lot by adding valuable insights to some complicated discussions, reviewed a lot of pull requests... Jens also added documentation about how to setup daemoize Zope 4 on a systemd powered Linux box and fixed on old bug with <a href="https://github.com/zopefoundation/Zope/pull/599">importing ZEXP files</a>.</p>
<h2>Some more positive news...</h2>
<p>Matthew Wilkes announced some <a href="https://community.plone.org/t/zope-contributor-agreement-process/8495">updates</a> on the upcoming merger of the Zope into the Plone foundation, and thus the improvements on the onboarding for new developers concerning the committer agreement.</p>
<h2>other than that...</h2>
<p>We have plenty of fun here. The venue ( <a href="https://twitter.com/koffij_halle">https://twitter.com/koffij_halle</a> ) is great - the food is excellent! Basti, the new cook, really rocks the kitchen!</p>

  </div>

  

  
  <div class="pagination">
    
      <span class="disabled">&laquo; Previous</span>
    
    | 1 |
    
      <a href="../blog/page/2/">Next &raquo;</a>
    
  </div>


  </div>
  <footer>
    &copy; Copyright 2018 - 2020 by Jürgen Gmach.
  </footer>
</body>
