<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Replace an URL in All Repositories | Jürgen Gmach</title>
<meta name=keywords content="all-repos,sed"><meta name=description content="Recently Anthony Sottile, one of the maintainers of Flake8, announced on Twitter that the source code repository of Flake8 was moved from GitLab to GitHub.
Those of us, who also use Anthony&rsquo;s pre-commit, now should update their .pre-commit-config.yaml file.
Though there is no hurry, as the repository on GitLab will stay as a mirror.
For one of my repos the .pre-config-config.yaml looks like this:
repos: ... - repo: https://gitlab.com/pycqa/flake8 rev: 3."><meta name=author content><link rel=canonical href=https://jugmac00.github.io/til/how-to-replace-url-in-all-repositories/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://jugmac00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jugmac00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jugmac00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jugmac00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jugmac00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://jugmac00.github.io/til/how-to-replace-url-in-all-repositories/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="How to Replace an URL in All Repositories"><meta property="og:description" content="Recently Anthony Sottile, one of the maintainers of Flake8, announced on Twitter that the source code repository of Flake8 was moved from GitLab to GitHub.
Those of us, who also use Anthony&rsquo;s pre-commit, now should update their .pre-commit-config.yaml file.
Though there is no hurry, as the repository on GitLab will stay as a mirror.
For one of my repos the .pre-config-config.yaml looks like this:
repos: ... - repo: https://gitlab.com/pycqa/flake8 rev: 3."><meta property="og:type" content="article"><meta property="og:url" content="https://jugmac00.github.io/til/how-to-replace-url-in-all-repositories/"><meta property="article:section" content="til"><meta property="article:published_time" content="2021-04-06T11:22:11+02:00"><meta property="article:modified_time" content="2021-04-06T11:22:11+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to Replace an URL in All Repositories"><meta name=twitter:description content="Recently Anthony Sottile, one of the maintainers of Flake8, announced on Twitter that the source code repository of Flake8 was moved from GitLab to GitHub.
Those of us, who also use Anthony&rsquo;s pre-commit, now should update their .pre-commit-config.yaml file.
Though there is no hurry, as the repository on GitLab will stay as a mirror.
For one of my repos the .pre-config-config.yaml looks like this:
repos: ... - repo: https://gitlab.com/pycqa/flake8 rev: 3."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Today I Learned","item":"https://jugmac00.github.io/til/"},{"@type":"ListItem","position":2,"name":"How to Replace an URL in All Repositories","item":"https://jugmac00.github.io/til/how-to-replace-url-in-all-repositories/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to Replace an URL in All Repositories","name":"How to Replace an URL in All Repositories","description":"Recently Anthony Sottile, one of the maintainers of Flake8, announced on Twitter that the source code repository of Flake8 was moved from GitLab to GitHub.\nThose of us, who also use Anthony\u0026rsquo;s pre-commit, now should update their .pre-commit-config.yaml file.\nThough there is no hurry, as the repository on GitLab will stay as a mirror.\nFor one of my repos the .pre-config-config.yaml looks like this:\nrepos: ... - repo: https://gitlab.com/pycqa/flake8 rev: 3.","keywords":["all-repos","sed"],"articleBody":"Recently Anthony Sottile, one of the maintainers of Flake8, announced on Twitter that the source code repository of Flake8 was moved from GitLab to GitHub.\nThose of us, who also use Anthony’s pre-commit, now should update their .pre-commit-config.yaml file.\nThough there is no hurry, as the repository on GitLab will stay as a mirror.\nFor one of my repos the .pre-config-config.yaml looks like this:\nrepos: ... - repo: https://gitlab.com/pycqa/flake8 rev: 3.9.0 hooks: - id: flake8 additional_dependencies: - flake8-click==0.3.1 - flake8-bugbear==20.1.4 ... I can easily replace the URL in the above configuration file, but what if you maintain 5, 10 or 300 repositories?\nall-repos This is a prime example for using all-repos, with which you can clone and manipulate many, many repositories at once.\nI have been using it intensively for the last six months, and I also wrote about using it a couple of times, but this time there is something new I learned.\nWhile all-repos offers many command line tools, all-repos-sed is the one we need to use this time.\nImaging using sed, the stream editor, but not on one file or repository, but on all of them.\nA common sed command looks like this:\n$ sed 's/unix/linux' hobbies.txt\nWhich means\nin the file hobbies.txt search for the first occurrence of unix and replace it with linux Note, that the slash is used as a delimiter.\nputting it all together So, we need to use all-repos-sed and we have to replace an URL - with slashes!\nDo we need to escape the slashes?\nTurns out no - you can use any character as delimiter, it does not need to be a /.\nall-repos-sed --commit-msg \"Update repository URL for Flake8\" s#https://gitlab.com/pycqa/flake8#https://github.com/PyCQA/flake8# -- '.pre-commit-config.yaml' Let’s break it down:\nall-repos-sed - like sed but applied on all repositories and on all files --commit-msg \"Update repository URL for Flake8\" - just the commit message for git s#https://gitlab.com/pycqa/flake8#https://github.com/PyCQA/flake8# - replace the old with the new URL; please note that I used # as a delimiter ‘.pre-commit-config.yaml’ - but only in the given configuration file ","wordCount":"340","inLanguage":"en","datePublished":"2021-04-06T11:22:11+02:00","dateModified":"2021-04-06T11:22:11+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jugmac00.github.io/til/how-to-replace-url-in-all-repositories/"},"publisher":{"@type":"Organization","name":"Jürgen Gmach","logo":{"@type":"ImageObject","url":"https://jugmac00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jugmac00.github.io/ accesskey=h title="Jürgen Gmach (Alt + H)">Jürgen Gmach</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://jugmac00.github.io/about/ title=about><span>about</span></a></li><li><a href=https://jugmac00.github.io/blog/ title=blog><span>blog</span></a></li><li><a href=https://jugmac00.github.io/til/ title=til><span>today-i-learned</span></a></li><li><a href=https://jugmac00.github.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://jugmac00.github.io/hiring/ title=hiring><span>hiring</span></a></li><li><a href=https://jugmac00.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">How to Replace an URL in All Repositories</h1><div class=post-meta><span title='2021-04-06 11:22:11 +0200 +0200'>April 6, 2021</span></div></header><div class=post-content><p>Recently Anthony Sottile, one of the maintainers of Flake8,
<a href=https://twitter.com/codewithanthony/status/1378746934928699396>announced on Twitter</a>
that the source code repository of <a href=https://pypi.org/project/flake8/>Flake8</a> was moved from GitLab to GitHub.</p><p>Those of us, who also use Anthony&rsquo;s <code>pre-commit</code>,
now should update their <code>.pre-commit-config.yaml</code> file.</p><p>Though there is no hurry, as the repository on GitLab will stay as a mirror.</p><p>For one of my repos the <code>.pre-config-config.yaml</code> looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>repos</span>:
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>-   <span style=color:#f92672>repo</span>: <span style=color:#ae81ff>https://gitlab.com/pycqa/flake8</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>rev</span>: <span style=color:#ae81ff>3.9.0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hooks</span>:
</span></span><span style=display:flex><span>    -   <span style=color:#f92672>id</span>: <span style=color:#ae81ff>flake8</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>additional_dependencies</span>:
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>flake8-click==0.3.1</span>
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>flake8-bugbear==20.1.4</span>
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>I can easily replace the URL in the above configuration file,
but what if you maintain 5, 10 or 300 repositories?</p><h1 id=all-repos>all-repos<a hidden class=anchor aria-hidden=true href=#all-repos>#</a></h1><p>This is a prime example for using <a href=https://github.com/asottile/all-repos>all-repos</a>,
with which you can clone and manipulate many, many repositories at once.</p><p>I have been using it intensively for the last six months,
and I also wrote about using it a couple of times,
but this time there is something new I learned.</p><p>While <code>all-repos</code> offers many command line tools,
<code>all-repos-sed</code> is the one we need to use this time.</p><p>Imaging using <code>sed</code>, the stream editor,
but not on one file or repository, but on all of them.</p><p>A common sed command looks like this:</p><p><code>$ sed 's/unix/linux' hobbies.txt</code></p><p>Which means</p><ul><li>in the file <code>hobbies.txt</code> search for the first occurrence of <code>unix</code></li><li>and replace it with <code>linux</code></li></ul><p>Note, that the slash is used as a delimiter.</p><h1 id=putting-it-all-together>putting it all together<a hidden class=anchor aria-hidden=true href=#putting-it-all-together>#</a></h1><p>So, we need to use <code>all-repos-sed</code> and we have to replace an URL - with slashes!</p><p>Do we need to escape the slashes?</p><p>Turns out no - you can use any character as delimiter, it does not need to be a <code>/</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>all-repos-sed --commit-msg <span style=color:#e6db74>&#34;Update repository URL for Flake8&#34;</span> s#https://gitlab.com/pycqa/flake8#https://github.com/PyCQA/flake8# -- <span style=color:#e6db74>&#39;.pre-commit-config.yaml&#39;</span>
</span></span></code></pre></div><p>Let&rsquo;s break it down:</p><ul><li><code>all-repos-sed</code> - like <code>sed</code> but applied on all repositories and on all files</li><li><code>--commit-msg "Update repository URL for Flake8"</code> - just the commit message for git</li><li><code>s#https://gitlab.com/pycqa/flake8#https://github.com/PyCQA/flake8#</code> - replace the old with the new URL; please note that I used <code>#</code> as a delimiter</li><li>&lsquo;.pre-commit-config.yaml&rsquo; - but only in the given configuration file</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/all-repos/>All-Repos</a></li><li><a href=https://jugmac00.github.io/tags/sed/>Sed</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://jugmac00.github.io/>Jürgen Gmach</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>