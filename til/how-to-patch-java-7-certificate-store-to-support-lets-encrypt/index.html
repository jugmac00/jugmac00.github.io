<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Patch Java 7 Certificate Store to Support Let's Encrypt | Jürgen Gmach</title><meta name=keywords content="java,ssl,tls,letsencrypt"><meta name=description content="Do you have to support a very old Java application?
Old as in only runs on 1.7.0_21-b11?
And this application needs to access websites on servers using Let&rsquo;s Encrypt?
Especially after September 2021, when the widespread DST Root CA X3 certificate will expire?
There is help.
keytool to the rescue Oracle kindly provides keytool.
With keytool you can view and manipulate the contents of the Java certificate store, which usually can be found at /lib/security/cacerts within in your Java runtime."><meta name=author content><link rel=canonical href=https://jugmac00.github.io/til/how-to-patch-java-7-certificate-store-to-support-lets-encrypt/><link crossorigin=anonymous href=/assets/css/stylesheet.96771a12b249af1ff464eabdaa85d1a5268a4379a9f2da62cfd409656ff0233b.css integrity="sha256-lncaErJJrx/0ZOq9qoXRpSaKQ3mp8tpiz9QJZW/wIzs=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://jugmac00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jugmac00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jugmac00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jugmac00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jugmac00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="How to Patch Java 7 Certificate Store to Support Let's Encrypt"><meta property="og:description" content="Do you have to support a very old Java application?
Old as in only runs on 1.7.0_21-b11?
And this application needs to access websites on servers using Let&rsquo;s Encrypt?
Especially after September 2021, when the widespread DST Root CA X3 certificate will expire?
There is help.
keytool to the rescue Oracle kindly provides keytool.
With keytool you can view and manipulate the contents of the Java certificate store, which usually can be found at /lib/security/cacerts within in your Java runtime."><meta property="og:type" content="article"><meta property="og:url" content="https://jugmac00.github.io/til/how-to-patch-java-7-certificate-store-to-support-lets-encrypt/"><meta property="article:section" content="til"><meta property="article:published_time" content="2021-07-06T09:58:39+02:00"><meta property="article:modified_time" content="2021-07-06T09:58:39+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to Patch Java 7 Certificate Store to Support Let's Encrypt"><meta name=twitter:description content="Do you have to support a very old Java application?
Old as in only runs on 1.7.0_21-b11?
And this application needs to access websites on servers using Let&rsquo;s Encrypt?
Especially after September 2021, when the widespread DST Root CA X3 certificate will expire?
There is help.
keytool to the rescue Oracle kindly provides keytool.
With keytool you can view and manipulate the contents of the Java certificate store, which usually can be found at /lib/security/cacerts within in your Java runtime."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Today I Learned","item":"https://jugmac00.github.io/til/"},{"@type":"ListItem","position":3,"name":"How to Patch Java 7 Certificate Store to Support Let's Encrypt","item":"https://jugmac00.github.io/til/how-to-patch-java-7-certificate-store-to-support-lets-encrypt/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to Patch Java 7 Certificate Store to Support Let's Encrypt","name":"How to Patch Java 7 Certificate Store to Support Let\u0027s Encrypt","description":"Do you have to support a very old Java application?\nOld as in only runs on 1.7.0_21-b11?\nAnd this application needs to access websites on servers using Let\u0026rsquo;s Encrypt?\nEspecially after September 2021, when the widespread DST Root CA X3 certificate will expire?\nThere is help.\nkeytool to the rescue Oracle kindly provides keytool.\nWith keytool you can view and manipulate the contents of the Java certificate store, which usually can be found at /lib/security/cacerts within in your Java runtime.","keywords":["java","ssl","tls","letsencrypt"],"articleBody":"Do you have to support a very old Java application?\nOld as in only runs on 1.7.0_21-b11?\nAnd this application needs to access websites on servers using Let’s Encrypt?\nEspecially after September 2021, when the widespread DST Root CA X3 certificate will expire?\nThere is help.\nkeytool to the rescue Oracle kindly provides keytool.\nWith keytool you can view and manipulate the contents of the Java certificate store, which usually can be found at /lib/security/cacerts within in your Java runtime.\nview certificates keytool -list -keystore cacerts -storepass changeit …where you need to replace\n cacerts with the path to your certificate store location changeit with the password for the store (changeit is the default password)  add new certificates First, you need to download the new ISRG Root X1/X2 certificates from Let’s Encrypt’s website.\nThen you just have to add them to your store …\nkeytool -import -keystore cacerts -storepass changeit -noprompt -trustcacerts -alias isrgrootx1.der -file isrgrootx1.der test the updated store Let’s encrypt kindly offers a test page to verify your changes worked: https://valid-isrgrootx1.letsencrypt.org/\nfurther information  https://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html https://letsencrypt.org/docs/dst-root-ca-x3-expiration-september-2021/ https://letsencrypt.org/certificates/ https://valid-isrgrootx1.letsencrypt.org/  ","wordCount":"178","inLanguage":"en","datePublished":"2021-07-06T09:58:39+02:00","dateModified":"2021-07-06T09:58:39+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jugmac00.github.io/til/how-to-patch-java-7-certificate-store-to-support-lets-encrypt/"},"publisher":{"@type":"Organization","name":"Jürgen Gmach","logo":{"@type":"ImageObject","url":"https://jugmac00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://jugmac00.github.io accesskey=h title="Jürgen Gmach (Alt + H)">Jürgen Gmach</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://jugmac00.github.io/about/ title=about><span>about</span></a></li><li><a href=https://jugmac00.github.io/blog/ title=blog><span>blog</span></a></li><li><a href=https://jugmac00.github.io/til/ title=til><span>today-i-learned</span></a></li><li><a href=https://jugmac00.github.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://jugmac00.github.io/hiring/ title=hiring><span>hiring</span></a></li><li><a href=https://jugmac00.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>How to Patch Java 7 Certificate Store to Support Let's Encrypt</h1><div class=post-meta><span title="2021-07-06 09:58:39 +0200 +0200">July 6, 2021</span></div></header><div class=post-content><p>Do you have to support a very old Java application?</p><p>Old as in <em>only runs on 1.7.0_21-b11</em>?</p><p>And this application needs to access websites on servers using <a href=https://letsencrypt.org/>Let&rsquo;s Encrypt</a>?</p><p>Especially after <a href=https://letsencrypt.org/docs/dst-root-ca-x3-expiration-september-2021/>September 2021</a>,
when the widespread <strong>DST Root CA X3</strong> certificate will expire?</p><p>There is help.</p><h2 id=keytool-to-the-rescue>keytool to the rescue<a hidden class=anchor aria-hidden=true href=#keytool-to-the-rescue>#</a></h2><p>Oracle kindly provides <a href=https://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html>keytool</a>.</p><p>With keytool you can view and manipulate the contents of the Java certificate store,
which usually can be found at <code>/lib/security/cacerts</code> within in your Java runtime.</p><h2 id=view-certificates>view certificates<a hidden class=anchor aria-hidden=true href=#view-certificates>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>keytool -list -keystore cacerts -storepass changeit
</code></pre></div><p>&mldr;where you need to replace</p><ul><li><code>cacerts</code> with the path to your certificate store location</li><li><code>changeit</code> with the password for the store (<code>changeit</code> is the default password)</li></ul><h2 id=add-new-certificates>add new certificates<a hidden class=anchor aria-hidden=true href=#add-new-certificates>#</a></h2><p>First, you need to download the new <code>ISRG Root X1/X2</code> certificates
from <a href=https://letsencrypt.org/certificates/>Let&rsquo;s Encrypt&rsquo;s website</a>.</p><p>Then you just have to add them to your store &mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>keytool -import -keystore cacerts -storepass changeit -noprompt -trustcacerts -alias isrgrootx1.der -file isrgrootx1.der
</code></pre></div><h2 id=test-the-updated-store>test the updated store<a hidden class=anchor aria-hidden=true href=#test-the-updated-store>#</a></h2><p>Let&rsquo;s encrypt kindly offers a test page to verify your changes worked: <a href=https://valid-isrgrootx1.letsencrypt.org/>https://valid-isrgrootx1.letsencrypt.org/</a></p><h2 id=further-information>further information<a hidden class=anchor aria-hidden=true href=#further-information>#</a></h2><ul><li><a href=https://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html>https://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html</a></li><li><a href=https://letsencrypt.org/docs/dst-root-ca-x3-expiration-september-2021/>https://letsencrypt.org/docs/dst-root-ca-x3-expiration-september-2021/</a></li><li><a href=https://letsencrypt.org/certificates/>https://letsencrypt.org/certificates/</a></li><li><a href=https://valid-isrgrootx1.letsencrypt.org/>https://valid-isrgrootx1.letsencrypt.org/</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/java/>java</a></li><li><a href=https://jugmac00.github.io/tags/ssl/>ssl</a></li><li><a href=https://jugmac00.github.io/tags/tls/>tls</a></li><li><a href=https://jugmac00.github.io/tags/letsencrypt/>letsencrypt</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://jugmac00.github.io>Jürgen Gmach</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>