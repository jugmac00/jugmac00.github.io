<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Add a Menu to the Sidebar With Sphinx | Jürgen Gmach</title><meta name=keywords content="sphinx,navigation,menu,readthedocs"><meta name=description content="Currently I am publishing the documentation on https://readthedocs.org/ for a lot of projects.
I was asked that the menu, which is shown at the bottom of the main page, should be also listed in the sidebar.
You need to know that menus are tocs in the Sphinx world, short for table of content.
initial sitution  one long document with code examples (index.rst) menu at the bottom (keyword: toctree), referencing CONTRIBUTING."><meta name=author content><link rel=canonical href=https://jugmac00.github.io/til/how-to-add-a-menu-to-the-sidebar-with-sphinx/><link crossorigin=anonymous href=/assets/css/stylesheet.96771a12b249af1ff464eabdaa85d1a5268a4379a9f2da62cfd409656ff0233b.css integrity="sha256-lncaErJJrx/0ZOq9qoXRpSaKQ3mp8tpiz9QJZW/wIzs=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://jugmac00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jugmac00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jugmac00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jugmac00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jugmac00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="How to Add a Menu to the Sidebar With Sphinx"><meta property="og:description" content="Currently I am publishing the documentation on https://readthedocs.org/ for a lot of projects.
I was asked that the menu, which is shown at the bottom of the main page, should be also listed in the sidebar.
You need to know that menus are tocs in the Sphinx world, short for table of content.
initial sitution  one long document with code examples (index.rst) menu at the bottom (keyword: toctree), referencing CONTRIBUTING."><meta property="og:type" content="article"><meta property="og:url" content="https://jugmac00.github.io/til/how-to-add-a-menu-to-the-sidebar-with-sphinx/"><meta property="article:section" content="til"><meta property="article:published_time" content="2021-11-04T11:13:10+01:00"><meta property="article:modified_time" content="2021-11-04T11:13:10+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to Add a Menu to the Sidebar With Sphinx"><meta name=twitter:description content="Currently I am publishing the documentation on https://readthedocs.org/ for a lot of projects.
I was asked that the menu, which is shown at the bottom of the main page, should be also listed in the sidebar.
You need to know that menus are tocs in the Sphinx world, short for table of content.
initial sitution  one long document with code examples (index.rst) menu at the bottom (keyword: toctree), referencing CONTRIBUTING."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Today I Learned","item":"https://jugmac00.github.io/til/"},{"@type":"ListItem","position":3,"name":"How to Add a Menu to the Sidebar With Sphinx","item":"https://jugmac00.github.io/til/how-to-add-a-menu-to-the-sidebar-with-sphinx/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to Add a Menu to the Sidebar With Sphinx","name":"How to Add a Menu to the Sidebar With Sphinx","description":"Currently I am publishing the documentation on https://readthedocs.org/ for a lot of projects.\nI was asked that the menu, which is shown at the bottom of the main page, should be also listed in the sidebar.\nYou need to know that menus are tocs in the Sphinx world, short for table of content.\ninitial sitution  one long document with code examples (index.rst) menu at the bottom (keyword: toctree), referencing CONTRIBUTING.","keywords":["sphinx","navigation","menu","readthedocs"],"articleBody":"Currently I am publishing the documentation on https://readthedocs.org/ for a lot of projects.\nI was asked that the menu, which is shown at the bottom of the main page, should be also listed in the sidebar.\nYou need to know that menus are tocs in the Sphinx world, short for table of content.\ninitial sitution  one long document with code examples (index.rst) menu at the bottom (keyword: toctree), referencing CONTRIBUTING.rst and NEWS.rst  ======= wadllib ======= An Application object represents a web service described by a WADLfile.# many lines.. toctree:: CONTRIBUTING NEWSshow the menu In order to show a menu on the left (location depends on the used theme), you need to add/update a html_sidebars entry in the conf.py, the configuration file for Sphinx.\nhtml_sidebars = { '**': [ 'globaltoc.html', ] } This shows the global table of contents on each page.\nOther valid options are:\n searchbox.html - shows a search box relations.html - shows links to the previous and next documents …  This worked, but there was no link to the page itself, ie the contents of index.rst.\nadd missing link to self Once you clicked on one of the links, there was no obivous way to get back to the main content.\nAdding index worked, but generated a couple of circular reference warnings.\nThe solution was to use self to reference to the same page.\nThis worked, but the menu looked a bit off, as the link items were capitalized, just as the contents of the toc.\nimprove formatting For the toc the filename is used as a title by default, which is not always a good fit.\nLuckily, you can use a special syntax to use arbitrary titles.\nJust put the document name in angle brackets, and the text before.\nfinal menu .. toctree::  self Contributing  News ","wordCount":"301","inLanguage":"en","datePublished":"2021-11-04T11:13:10+01:00","dateModified":"2021-11-04T11:13:10+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jugmac00.github.io/til/how-to-add-a-menu-to-the-sidebar-with-sphinx/"},"publisher":{"@type":"Organization","name":"Jürgen Gmach","logo":{"@type":"ImageObject","url":"https://jugmac00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://jugmac00.github.io accesskey=h title="Jürgen Gmach (Alt + H)">Jürgen Gmach</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://jugmac00.github.io/about/ title=about><span>about</span></a></li><li><a href=https://jugmac00.github.io/blog/ title=blog><span>blog</span></a></li><li><a href=https://jugmac00.github.io/til/ title=til><span>today-i-learned</span></a></li><li><a href=https://jugmac00.github.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://jugmac00.github.io/hiring/ title=hiring><span>hiring</span></a></li><li><a href=https://jugmac00.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>How to Add a Menu to the Sidebar With Sphinx</h1><div class=post-meta><span title="2021-11-04 11:13:10 +0100 +0100">November 4, 2021</span></div></header><div class=post-content><p>Currently I am publishing the documentation on <a href=https://readthedocs.org/>https://readthedocs.org/</a> for a lot of projects.</p><p>I was asked that the menu,
which is shown at the bottom of the main page,
should be also listed in the sidebar.</p><p>You need to know that menus are <code>toc</code>s in the Sphinx world,
short for <strong>table of content</strong>.</p><h2 id=initial-sitution>initial sitution<a hidden class=anchor aria-hidden=true href=#initial-sitution>#</a></h2><ul><li>one long document with code examples (<code>index.rst</code>)</li><li>menu at the bottom (keyword: <code>toctree</code>), referencing <code>CONTRIBUTING.rst</code> and <code>NEWS.rst</code></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rst data-lang=rst>=======
wadllib
=======
<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>An Application object represents a web service described by a WADL<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>file.<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span># many lines<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>.. <span style=color:#f92672>toctree</span>::<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>   CONTRIBUTING<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>   NEWS<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><h2 id=show-the-menu>show the menu<a hidden class=anchor aria-hidden=true href=#show-the-menu>#</a></h2><p>In order to show a menu on the left (location depends on the used theme),
you need to add/update a <code>html_sidebars</code> entry in the <code>conf.py</code>,
the configuration file for Sphinx.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>html_sidebars <span style=color:#f92672>=</span> {
    <span style=color:#e6db74>&#39;**&#39;</span>: [
        <span style=color:#e6db74>&#39;globaltoc.html&#39;</span>,
    ]
}
</code></pre></div><p>This shows the global table of contents on each page.</p><p>Other <a href=https://www.sphinx-doc.org/en/master/usage/configuration.html#confval-html_sidebars>valid options</a> are:</p><ul><li><code>searchbox.html</code> -> shows a search box</li><li><code>relations.html</code> -> shows links to the previous and next documents</li><li>&mldr;</li></ul><p>This worked, but there was no link to the page itself, ie the contents of <code>index.rst</code>.</p><h2 id=add-missing-link-to-self>add missing link to self<a hidden class=anchor aria-hidden=true href=#add-missing-link-to-self>#</a></h2><p>Once you clicked on one of the links,
there was no obivous way to get back to the main content.</p><p>Adding <code>index</code> worked,
but generated a couple of <code>circular reference</code> warnings.</p><p>The solution was to use <code>self</code> to reference to the same page.</p><p>This worked, but the menu looked a bit off,
as the link items were capitalized,
just as the contents of the <code>toc</code>.</p><h2 id=improve-formatting>improve formatting<a hidden class=anchor aria-hidden=true href=#improve-formatting>#</a></h2><p>For the <code>toc</code> the filename is used as a title by default,
which is not always a good fit.</p><p>Luckily, you can use a special syntax to use arbitrary titles.</p><p>Just put the document name in angle brackets, and the text before.</p><h2 id=final-menu>final menu<a hidden class=anchor aria-hidden=true href=#final-menu>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rst data-lang=rst> .. <span style=color:#f92672>toctree</span>::<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    self<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    Contributing &lt;CONTRIBUTING&gt;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    News &lt;NEWS&gt;<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/sphinx/>sphinx</a></li><li><a href=https://jugmac00.github.io/tags/navigation/>navigation</a></li><li><a href=https://jugmac00.github.io/tags/menu/>menu</a></li><li><a href=https://jugmac00.github.io/tags/readthedocs/>readthedocs</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://jugmac00.github.io>Jürgen Gmach</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>