<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Make a Traceback Less Verbose in Jupyter Notebooks | Jürgen Gmach</title><meta name=keywords content="jupyter-notebook,traceback"><meta name=description content="For a project I wanted to try out something new - using Jupyter Notebook to document its XML-RPC API, so documentation and specification cannot drift apart.
This worked out great.
Except - as the API also has to handle invalid input, Jupyter Notebook shows - correctly - the traceback.
The traceback is super verbose.
request server.get_licenses(&#34;not-existing-id&#34;) current print out in Jupyter Notebook --------------------------------------------------------------------------- Fault Traceback (most recent call last) <ipython-input-5-366cceb6869e> in <module> ----> 1 server."><meta name=author content><link rel=canonical href=https://jugmac00.github.io/til/how-to-make-a-traceback-less-verbose-in-jupyter-notebooks/><link crossorigin=anonymous href=/assets/css/stylesheet.min.309a3942f890eb0930959205be1f692b2f0e85115a8b0190361a25a37e54fffa.css integrity="sha256-MJo5QviQ6wkwlZIFvh9pKy8OhRFaiwGQNholo35U//o=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://jugmac00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jugmac00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jugmac00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jugmac00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jugmac00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.82.0"><meta property="og:title" content="How to Make a Traceback Less Verbose in Jupyter Notebooks"><meta property="og:description" content="For a project I wanted to try out something new - using Jupyter Notebook to document its XML-RPC API, so documentation and specification cannot drift apart.
This worked out great.
Except - as the API also has to handle invalid input, Jupyter Notebook shows - correctly - the traceback.
The traceback is super verbose.
request server.get_licenses(&#34;not-existing-id&#34;) current print out in Jupyter Notebook --------------------------------------------------------------------------- Fault Traceback (most recent call last) <ipython-input-5-366cceb6869e> in <module> ----> 1 server."><meta property="og:type" content="article"><meta property="og:url" content="https://jugmac00.github.io/til/how-to-make-a-traceback-less-verbose-in-jupyter-notebooks/"><meta property="article:section" content="til"><meta property="article:published_time" content="2021-08-02T14:51:04+02:00"><meta property="article:modified_time" content="2021-08-02T14:51:04+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to Make a Traceback Less Verbose in Jupyter Notebooks"><meta name=twitter:description content="For a project I wanted to try out something new - using Jupyter Notebook to document its XML-RPC API, so documentation and specification cannot drift apart.
This worked out great.
Except - as the API also has to handle invalid input, Jupyter Notebook shows - correctly - the traceback.
The traceback is super verbose.
request server.get_licenses(&#34;not-existing-id&#34;) current print out in Jupyter Notebook --------------------------------------------------------------------------- Fault Traceback (most recent call last) <ipython-input-5-366cceb6869e> in <module> ----> 1 server."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Today I Learned","item":"https://jugmac00.github.io/til/"},{"@type":"ListItem","position":3,"name":"How to Make a Traceback Less Verbose in Jupyter Notebooks","item":"https://jugmac00.github.io/til/how-to-make-a-traceback-less-verbose-in-jupyter-notebooks/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to Make a Traceback Less Verbose in Jupyter Notebooks","name":"How to Make a Traceback Less Verbose in Jupyter Notebooks","description":"For a project I wanted to try out something new - using Jupyter Notebook to document its XML-RPC API, so documentation and specification cannot drift apart.\nThis worked out great.\nExcept - as the API also has to handle invalid input, Jupyter Notebook shows - correctly - the traceback.\nThe traceback is super verbose.\nrequest server.get_licenses(\u0026#34;not-existing-id\u0026#34;) current print out in Jupyter Notebook --------------------------------------------------------------------------- Fault Traceback (most recent call last) \u0026lt;ipython-input-5-366cceb6869e\u0026gt; in \u0026lt;module\u0026gt; ----\u0026gt; 1 server.","keywords":["jupyter-notebook","traceback"],"articleBody":"For a project I wanted to try out something new - using Jupyter Notebook to document its XML-RPC API, so documentation and specification cannot drift apart.\nThis worked out great.\nExcept - as the API also has to handle invalid input, Jupyter Notebook shows - correctly - the traceback.\nThe traceback is super verbose.\nrequest server.get_licenses(\"not-existing-id\") current print out in Jupyter Notebook --------------------------------------------------------------------------- Fault Traceback (most recent call last) ipython-input-5-366cceb6869e in module ---- 1 server.get_licenses(\"not-existing-id\") /usr/lib/python3.9/xmlrpc/client.py in __call__(self, *args) 1114 return _Method(self.__send, \"%s.%s\" % (self.__name, name)) 1115 def __call__(self, *args): - 1116 return self.__send(self.__name, args) 1117 1118 ## /usr/lib/python3.9/xmlrpc/client.py in __request(self, methodname, params) 1456 allow_none=self.__allow_none).encode(self.__encoding, 'xmlcharrefreplace') 1457 - 1458 response = self.__transport.request( 1459 self.__host, 1460 self.__handler, /usr/lib/python3.9/xmlrpc/client.py in request(self, host, handler, request_body, verbose) 1158 for i in (0, 1): 1159 try: - 1160 return self.single_request(host, handler, request_body, verbose) 1161 except http.client.RemoteDisconnected: 1162 if i: /usr/lib/python3.9/xmlrpc/client.py in single_request(self, host, handler, request_body, verbose) 1174 if resp.status == 200: 1175 self.verbose = verbose - 1176 return self.parse_response(resp) 1177 1178 except Fault: /usr/lib/python3.9/xmlrpc/client.py in parse_response(self, response) 1346 p.close() 1347 - 1348 return u.close() 1349 1350 ## /usr/lib/python3.9/xmlrpc/client.py in close(self) 660 raise ResponseError() 661 if self._type == \"fault\": -- 662 raise Fault(**self._stack[0]) 663 return tuple(self._stack) 664 Fault: Fault 1: 'company id is not valid' output should look like this Fault: an almost perfect solution The following solution, using sys.excepthook works in a REPL…\ncode import sys def my_exc_handler(type, value, traceback): print(repr(value), file=sys.stderr) sys.excepthook = my_exc_handler 1 / 0 bash ❯ python3.9 main.py ZeroDivisionError('division by zero') … but unfortunately not in Jupyter Notebook - I still get the full traceback.\nWhen I have a look at Python’s documentation…\n When an exception is raised and uncaught\n … maybe the “uncaught” is the problem. When I have to guess, I think Jupyter Notebook catches all exceptions, and does the formatting and printing itself.\nthe actual solution This weekend, during the wonderful PyOhio conference, I chatted with a couple of fellow participants in the channel for the “9 Jupyter Notebook Tricks for Your Next Advent of Code” talk, and boom… there was the solution, thanks to Kaspar (or David)*:\n%xmode Minimal This is a builtin of Jupyter Notebook. You just put it into a cell at the top of your notebook.\n*) Yes - that is the actual user name :-)\n","wordCount":"389","inLanguage":"en","datePublished":"2021-08-02T14:51:04+02:00","dateModified":"2021-08-02T14:51:04+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jugmac00.github.io/til/how-to-make-a-traceback-less-verbose-in-jupyter-notebooks/"},"publisher":{"@type":"Organization","name":"Jürgen Gmach","logo":{"@type":"ImageObject","url":"https://jugmac00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://jugmac00.github.io accesskey=h title="Jürgen Gmach (Alt + H)">Jürgen Gmach</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://jugmac00.github.io/about/ title=about><span>about</span></a></li><li><a href=https://jugmac00.github.io/blog/ title=blog><span>blog</span></a></li><li><a href=https://jugmac00.github.io/til/ title=til><span>today-i-learned</span></a></li><li><a href=https://jugmac00.github.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://jugmac00.github.io/hiring/ title=hiring><span>hiring</span></a></li><li><a href=https://jugmac00.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>How to Make a Traceback Less Verbose in Jupyter Notebooks</h1><div class=post-meta>August 2, 2021</div></header><div class=post-content><p>For a project I wanted to try out something new - using Jupyter Notebook to document its XML-RPC API,
so documentation and specification cannot drift apart.</p><p>This worked out great.</p><p>Except - as the API also has to handle invalid input, Jupyter Notebook shows - correctly - the traceback.</p><p>The traceback is super verbose.</p><h3 id=request>request<a hidden class=anchor aria-hidden=true href=#request>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>server<span style=color:#f92672>.</span>get_licenses(<span style=color:#e6db74>&#34;not-existing-id&#34;</span>)
</code></pre></div><h3 id=current-print-out-in-jupyter-notebook>current print out in Jupyter Notebook<a hidden class=anchor aria-hidden=true href=#current-print-out-in-jupyter-notebook>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>---------------------------------------------------------------------------</span>
Fault                                     Traceback (most recent call last)
<span style=color:#f92672>&lt;</span>ipython<span style=color:#f92672>-</span>input<span style=color:#f92672>-</span><span style=color:#ae81ff>5</span><span style=color:#f92672>-</span><span style=color:#ae81ff>366</span>cceb6869e<span style=color:#f92672>&gt;</span> <span style=color:#f92672>in</span> <span style=color:#f92672>&lt;</span>module<span style=color:#f92672>&gt;</span>
<span style=color:#f92672>----&gt;</span> <span style=color:#ae81ff>1</span> server<span style=color:#f92672>.</span>get_licenses(<span style=color:#e6db74>&#34;not-existing-id&#34;</span>)

<span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>python3<span style=color:#f92672>.</span><span style=color:#ae81ff>9</span><span style=color:#f92672>/</span>xmlrpc<span style=color:#f92672>/</span>client<span style=color:#f92672>.</span>py <span style=color:#f92672>in</span> __call__(self, <span style=color:#f92672>*</span>args)
   <span style=color:#ae81ff>1114</span>         <span style=color:#66d9ef>return</span> _Method(self<span style=color:#f92672>.</span>__send, <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>.</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> (self<span style=color:#f92672>.</span>__name, name))
   <span style=color:#ae81ff>1115</span>     <span style=color:#66d9ef>def</span> __call__(self, <span style=color:#f92672>*</span>args):
<span style=color:#f92672>-&gt;</span> <span style=color:#ae81ff>1116</span>         <span style=color:#66d9ef>return</span> self<span style=color:#f92672>.</span>__send(self<span style=color:#f92672>.</span>__name, args)
   <span style=color:#ae81ff>1117</span> 
   <span style=color:#ae81ff>1118</span> <span style=color:#75715e>##</span>

<span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>python3<span style=color:#f92672>.</span><span style=color:#ae81ff>9</span><span style=color:#f92672>/</span>xmlrpc<span style=color:#f92672>/</span>client<span style=color:#f92672>.</span>py <span style=color:#f92672>in</span> __request(self, methodname, params)
   <span style=color:#ae81ff>1456</span>                         allow_none<span style=color:#f92672>=</span>self<span style=color:#f92672>.</span>__allow_none)<span style=color:#f92672>.</span>encode(self<span style=color:#f92672>.</span>__encoding, <span style=color:#e6db74>&#39;xmlcharrefreplace&#39;</span>)
   <span style=color:#ae81ff>1457</span> 
<span style=color:#f92672>-&gt;</span> <span style=color:#ae81ff>1458</span>         response <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>__transport<span style=color:#f92672>.</span>request(
   <span style=color:#ae81ff>1459</span>             self<span style=color:#f92672>.</span>__host,
   <span style=color:#ae81ff>1460</span>             self<span style=color:#f92672>.</span>__handler,

<span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>python3<span style=color:#f92672>.</span><span style=color:#ae81ff>9</span><span style=color:#f92672>/</span>xmlrpc<span style=color:#f92672>/</span>client<span style=color:#f92672>.</span>py <span style=color:#f92672>in</span> request(self, host, handler, request_body, verbose)
   <span style=color:#ae81ff>1158</span>         <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> (<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>):
   <span style=color:#ae81ff>1159</span>             <span style=color:#66d9ef>try</span>:
<span style=color:#f92672>-&gt;</span> <span style=color:#ae81ff>1160</span>                 <span style=color:#66d9ef>return</span> self<span style=color:#f92672>.</span>single_request(host, handler, request_body, verbose)
   <span style=color:#ae81ff>1161</span>             <span style=color:#66d9ef>except</span> http<span style=color:#f92672>.</span>client<span style=color:#f92672>.</span>RemoteDisconnected:
   <span style=color:#ae81ff>1162</span>                 <span style=color:#66d9ef>if</span> i:

<span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>python3<span style=color:#f92672>.</span><span style=color:#ae81ff>9</span><span style=color:#f92672>/</span>xmlrpc<span style=color:#f92672>/</span>client<span style=color:#f92672>.</span>py <span style=color:#f92672>in</span> single_request(self, host, handler, request_body, verbose)
   <span style=color:#ae81ff>1174</span>             <span style=color:#66d9ef>if</span> resp<span style=color:#f92672>.</span>status <span style=color:#f92672>==</span> <span style=color:#ae81ff>200</span>:
   <span style=color:#ae81ff>1175</span>                 self<span style=color:#f92672>.</span>verbose <span style=color:#f92672>=</span> verbose
<span style=color:#f92672>-&gt;</span> <span style=color:#ae81ff>1176</span>                 <span style=color:#66d9ef>return</span> self<span style=color:#f92672>.</span>parse_response(resp)
   <span style=color:#ae81ff>1177</span> 
   <span style=color:#ae81ff>1178</span>         <span style=color:#66d9ef>except</span> Fault:

<span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>python3<span style=color:#f92672>.</span><span style=color:#ae81ff>9</span><span style=color:#f92672>/</span>xmlrpc<span style=color:#f92672>/</span>client<span style=color:#f92672>.</span>py <span style=color:#f92672>in</span> parse_response(self, response)
   <span style=color:#ae81ff>1346</span>         p<span style=color:#f92672>.</span>close()
   <span style=color:#ae81ff>1347</span> 
<span style=color:#f92672>-&gt;</span> <span style=color:#ae81ff>1348</span>         <span style=color:#66d9ef>return</span> u<span style=color:#f92672>.</span>close()
   <span style=color:#ae81ff>1349</span> 
   <span style=color:#ae81ff>1350</span> <span style=color:#75715e>##</span>

<span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>python3<span style=color:#f92672>.</span><span style=color:#ae81ff>9</span><span style=color:#f92672>/</span>xmlrpc<span style=color:#f92672>/</span>client<span style=color:#f92672>.</span>py <span style=color:#f92672>in</span> close(self)
    <span style=color:#ae81ff>660</span>             <span style=color:#66d9ef>raise</span> ResponseError()
    <span style=color:#ae81ff>661</span>         <span style=color:#66d9ef>if</span> self<span style=color:#f92672>.</span>_type <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;fault&#34;</span>:
<span style=color:#f92672>--&gt;</span> <span style=color:#ae81ff>662</span>             <span style=color:#66d9ef>raise</span> Fault(<span style=color:#f92672>**</span>self<span style=color:#f92672>.</span>_stack[<span style=color:#ae81ff>0</span>])
    <span style=color:#ae81ff>663</span>         <span style=color:#66d9ef>return</span> tuple(self<span style=color:#f92672>.</span>_stack)
    <span style=color:#ae81ff>664</span> 

Fault: <span style=color:#f92672>&lt;</span>Fault <span style=color:#ae81ff>1</span>: <span style=color:#e6db74>&#39;company id is not valid&#39;</span><span style=color:#f92672>&gt;</span>
</code></pre></div><h3 id=output-should-look-like-this>output should look like this<a hidden class=anchor aria-hidden=true href=#output-should-look-like-this>#</a></h3><pre><code>Fault: &lt;Fault 1: 'company id is not valid'&gt;
</code></pre><h2 id=an-almost-perfect-solution>an almost perfect solution<a hidden class=anchor aria-hidden=true href=#an-almost-perfect-solution>#</a></h2><p>The following solution,
using <a href=https://docs.python.org/3/library/sys.html#sys.excepthook>sys.excepthook</a> works in a REPL&mldr;</p><h3 id=code>code<a hidden class=anchor aria-hidden=true href=#code>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> sys

<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>my_exc_handler</span>(type, value, traceback):
    <span style=color:#66d9ef>print</span>(repr(value), file<span style=color:#f92672>=</span>sys<span style=color:#f92672>.</span>stderr)
    
sys<span style=color:#f92672>.</span>excepthook <span style=color:#f92672>=</span> my_exc_handler

<span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>0</span>
</code></pre></div><h3 id=bash>bash<a hidden class=anchor aria-hidden=true href=#bash>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>❯ python3.9 main.py 
ZeroDivisionError<span style=color:#f92672>(</span><span style=color:#e6db74>&#39;division by zero&#39;</span><span style=color:#f92672>)</span>
</code></pre></div><p>&mldr; but unfortunately not in <strong>Jupyter Notebook</strong> - I still get the full traceback.</p><p>When I have a look at Python&rsquo;s documentation&mldr;</p><blockquote><p>When an exception is raised and uncaught</p></blockquote><p>&mldr; maybe the &ldquo;uncaught&rdquo; is the problem. When I have to guess, I think <strong>Jupyter Notebook</strong> catches all exceptions, and does the formatting and printing itself.</p><h2 id=the-actual-solution>the actual solution<a hidden class=anchor aria-hidden=true href=#the-actual-solution>#</a></h2><p>This weekend, during the wonderful <a href=https://www.pyohio.org/>PyOhio</a> conference,
I chatted with a couple of fellow participants in the channel for the
&ldquo;9 Jupyter Notebook Tricks for Your Next Advent of Code&rdquo; talk,
and boom&mldr; there was the solution, thanks to Kaspar (or David)*:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>%xmode Minimal
</code></pre></div><p>This is a <a href=https://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-xmode>builtin</a> of Jupyter Notebook. You just put it into a cell at the top of your notebook.</p><p>*) Yes - that is the actual user name :-)</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/jupyter-notebook/>jupyter-notebook</a></li><li><a href=https://jugmac00.github.io/tags/traceback/>traceback</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://jugmac00.github.io>Jürgen Gmach</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>