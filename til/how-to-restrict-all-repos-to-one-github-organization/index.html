<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Restrict All Repos to One Github Organization | Jürgen Gmach</title><meta name=keywords content="all-repos,github"><meta name=description content="Especially, when maintaining many, many git repositories at once, Anthony Sottile&rsquo;s all-repos is a bliss.
You can easily grep for text or find files in, or even apply patches to hundreds or thousands of repositories at once, which I already described in a blog post.
all-repos has a configuration option, which allows you to clone and manage all of your GitHub repositories at once.
Mine looks like&mldr;
{ &#34;output_dir&#34;: &#34;output&#34;, &#34;source&#34;: &#34;all_repos."><meta name=author content><link rel=canonical href=https://jugmac00.github.io/til/how-to-restrict-all-repos-to-one-github-organization/><link crossorigin=anonymous href=/assets/css/stylesheet.min.309a3942f890eb0930959205be1f692b2f0e85115a8b0190361a25a37e54fffa.css integrity="sha256-MJo5QviQ6wkwlZIFvh9pKy8OhRFaiwGQNholo35U//o=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://jugmac00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jugmac00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jugmac00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jugmac00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jugmac00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.82.0"><meta property="og:title" content="How to Restrict All Repos to One Github Organization"><meta property="og:description" content="Especially, when maintaining many, many git repositories at once, Anthony Sottile&rsquo;s all-repos is a bliss.
You can easily grep for text or find files in, or even apply patches to hundreds or thousands of repositories at once, which I already described in a blog post.
all-repos has a configuration option, which allows you to clone and manage all of your GitHub repositories at once.
Mine looks like&mldr;
{ &#34;output_dir&#34;: &#34;output&#34;, &#34;source&#34;: &#34;all_repos."><meta property="og:type" content="article"><meta property="og:url" content="https://jugmac00.github.io/til/how-to-restrict-all-repos-to-one-github-organization/"><meta property="article:section" content="til"><meta property="article:published_time" content="2021-02-25T16:36:50+02:00"><meta property="article:modified_time" content="2021-02-25T16:36:50+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to Restrict All Repos to One Github Organization"><meta name=twitter:description content="Especially, when maintaining many, many git repositories at once, Anthony Sottile&rsquo;s all-repos is a bliss.
You can easily grep for text or find files in, or even apply patches to hundreds or thousands of repositories at once, which I already described in a blog post.
all-repos has a configuration option, which allows you to clone and manage all of your GitHub repositories at once.
Mine looks like&mldr;
{ &#34;output_dir&#34;: &#34;output&#34;, &#34;source&#34;: &#34;all_repos."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Today I Learned","item":"https://jugmac00.github.io/til/"},{"@type":"ListItem","position":3,"name":"How to Restrict All Repos to One Github Organization","item":"https://jugmac00.github.io/til/how-to-restrict-all-repos-to-one-github-organization/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to Restrict All Repos to One Github Organization","name":"How to Restrict All Repos to One Github Organization","description":"Especially, when maintaining many, many git repositories at once, Anthony Sottile\u0026rsquo;s all-repos is a bliss.\nYou can easily grep for text or find files in, or even apply patches to hundreds or thousands of repositories at once, which I already described in a blog post.\nall-repos has a configuration option, which allows you to clone and manage all of your GitHub repositories at once.\nMine looks like\u0026hellip;\n{ \u0026#34;output_dir\u0026#34;: \u0026#34;output\u0026#34;, \u0026#34;source\u0026#34;: \u0026#34;all_repos.","keywords":["all-repos","github"],"articleBody":"Especially, when maintaining many, many git repositories at once, Anthony Sottile’s all-repos is a bliss.\nYou can easily grep for text or find files in, or even apply patches to hundreds or thousands of repositories at once, which I already described in a blog post.\nall-repos has a configuration option, which allows you to clone and manage all of your GitHub repositories at once.\nMine looks like…\n{ \"output_dir\": \"output\", \"source\": \"all_repos.source.github\", \"source_settings\": { \"api_key\": \"xxx\", \"username\": \"jugmac00\", \"collaborator\": \"true\", \"forks\": \"true\", \"private\": \"true\" }, \"push\": \"all_repos.push.github_pull_request\", \"push_settings\": { \"api_key\": \"xxx\", \"username\": \"jugmac00\" } } With an all-repos-clone I now can download all my personal repos, all the repos of my organizations (e.g. zopefoundation, plone, …), and even the private ones of the company I work for.\nIn sum these are way more than 1.000 repositories.\nBut what if you get too many results or just want to search in one GitHub organization, not in all of them?\n(maybe not so) quick and dirty Imagine, you want to search only in the GitHub organization of acme, instead of running\nall-repos grep search-term do a\nall-repos-grep search-term | grep acme This certainly works, but there some downsides…\n all-repos still searches in all repositories, and thus it can take quite some time. You loose the syntax highlighting of the grep command, which you could counter with…  all-repos-grep search-term | grep acme | grep search-term use a separate configuration file You could create a separate configuration file for acme like this…\n{ \"output_dir\": \"output_acme\", \"source\": \"all_repos.source.github_org\", \"source_settings\": { \"api_key\": \"xxx\", \"org\": \"acme\" }, \"push\": \"all_repos.push.github_pull_request\", \"push_settings\": { \"api_key\": \"xxx\", \"username\": \"jugmac00\" } } and use search like this…\nall-repos-grep -C all-repos-acme.json search-term create a pull request for a command line option Maybe Anthony would accept a pull request to add a command line option like e.g. “–in-repo” or “–in-repos”, where you could specify the repository or repositories to search in?\nWho knows :-)\nthanks Many thanks to Anthony for creating this and many other invaluable tools, and many thanks for being helpful on so many occasions.\n","wordCount":"343","inLanguage":"en","datePublished":"2021-02-25T16:36:50+02:00","dateModified":"2021-02-25T16:36:50+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jugmac00.github.io/til/how-to-restrict-all-repos-to-one-github-organization/"},"publisher":{"@type":"Organization","name":"Jürgen Gmach","logo":{"@type":"ImageObject","url":"https://jugmac00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://jugmac00.github.io accesskey=h title="Jürgen Gmach (Alt + H)">Jürgen Gmach</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://jugmac00.github.io/about/ title=about><span>about</span></a></li><li><a href=https://jugmac00.github.io/blog/ title=blog><span>blog</span></a></li><li><a href=https://jugmac00.github.io/til/ title=til><span>today-i-learned</span></a></li><li><a href=https://jugmac00.github.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://jugmac00.github.io/hiring/ title=hiring><span>hiring</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>How to Restrict All Repos to One Github Organization</h1><div class=post-meta>February 25, 2021</div></header><div class=post-content><p>Especially, when maintaining many, many git repositories at once,
Anthony Sottile&rsquo;s <a href=https://github.com/asottile/all-repos>all-repos</a> is a bliss.</p><p>You can easily grep for text or find files in,
or even apply patches to hundreds or thousands of repositories at once,
which I already described in a <a href=https://jugmac00.github.io/blog/how-to-create-hundreds-of-pull-requests-with-a-single-command/>blog post</a>.</p><p><code>all-repos</code> has a configuration option,
which allows you to clone and manage all of your GitHub repositories at once.</p><p>Mine looks like&mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;output_dir&#34;</span>: <span style=color:#e6db74>&#34;output&#34;</span>,
    <span style=color:#f92672>&#34;source&#34;</span>: <span style=color:#e6db74>&#34;all_repos.source.github&#34;</span>,
    <span style=color:#f92672>&#34;source_settings&#34;</span>:  {
        <span style=color:#f92672>&#34;api_key&#34;</span>: <span style=color:#e6db74>&#34;xxx&#34;</span>,
        <span style=color:#f92672>&#34;username&#34;</span>: <span style=color:#e6db74>&#34;jugmac00&#34;</span>,
        <span style=color:#f92672>&#34;collaborator&#34;</span>: <span style=color:#e6db74>&#34;true&#34;</span>,
        <span style=color:#f92672>&#34;forks&#34;</span>: <span style=color:#e6db74>&#34;true&#34;</span>,
        <span style=color:#f92672>&#34;private&#34;</span>: <span style=color:#e6db74>&#34;true&#34;</span>
    },
    <span style=color:#f92672>&#34;push&#34;</span>: <span style=color:#e6db74>&#34;all_repos.push.github_pull_request&#34;</span>,
    <span style=color:#f92672>&#34;push_settings&#34;</span>: {
        <span style=color:#f92672>&#34;api_key&#34;</span>: <span style=color:#e6db74>&#34;xxx&#34;</span>,
        <span style=color:#f92672>&#34;username&#34;</span>: <span style=color:#e6db74>&#34;jugmac00&#34;</span>
    }
}
</code></pre></div><p>With an <code>all-repos-clone</code> I now can download all my personal repos,
all the repos of my organizations (e.g. zopefoundation, plone, &mldr;),
and even the private ones of the company I work for.</p><p>In sum these are way more than 1.000 repositories.</p><p>But what if you get too many results or just want to search in one GitHub organization,
not in all of them?</p><h2 id=maybe-not-so-quick-and-dirty>(maybe not so) quick and dirty<a hidden class=anchor aria-hidden=true href=#maybe-not-so-quick-and-dirty>#</a></h2><p>Imagine, you want to search only in the GitHub organization of <strong>acme</strong>, instead of running</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>all-repos grep search-term
</code></pre></div><p>do a</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>all-repos-grep search-term | grep acme
</code></pre></div><p>This certainly works, but there some downsides&mldr;</p><ol><li><code>all-repos</code> still searches in all repositories, and thus it can take quite some time.</li><li>You loose the syntax highlighting of the grep command, which you could counter with&mldr;</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>all-repos-grep search-term | grep acme | grep search-term
</code></pre></div><h2 id=use-a-separate-configuration-file>use a separate configuration file<a hidden class=anchor aria-hidden=true href=#use-a-separate-configuration-file>#</a></h2><p>You could create a separate configuration file for <code>acme</code> like this&mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;output_dir&#34;</span>: <span style=color:#e6db74>&#34;output_acme&#34;</span>,
    <span style=color:#f92672>&#34;source&#34;</span>: <span style=color:#e6db74>&#34;all_repos.source.github_org&#34;</span>,
    <span style=color:#f92672>&#34;source_settings&#34;</span>:  {
        <span style=color:#f92672>&#34;api_key&#34;</span>: <span style=color:#e6db74>&#34;xxx&#34;</span>,
        <span style=color:#f92672>&#34;org&#34;</span>: <span style=color:#e6db74>&#34;acme&#34;</span>
    },
    <span style=color:#f92672>&#34;push&#34;</span>: <span style=color:#e6db74>&#34;all_repos.push.github_pull_request&#34;</span>,
    <span style=color:#f92672>&#34;push_settings&#34;</span>: {
        <span style=color:#f92672>&#34;api_key&#34;</span>: <span style=color:#e6db74>&#34;xxx&#34;</span>,
        <span style=color:#f92672>&#34;username&#34;</span>: <span style=color:#e6db74>&#34;jugmac00&#34;</span>
    }
}
</code></pre></div><p>and use search like this&mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>all-repos-grep -C all-repos-acme.json search-term
</code></pre></div><h2 id=create-a-pull-request-for-a-command-line-option>create a pull request for a command line option<a hidden class=anchor aria-hidden=true href=#create-a-pull-request-for-a-command-line-option>#</a></h2><p>Maybe Anthony would accept a pull request to add a command line option like e.g. &ldquo;&ndash;in-repo&rdquo; or &ldquo;&ndash;in-repos&rdquo;,
where you could specify the repository or repositories to search in?</p><p>Who knows :-)</p><h2 id=thanks>thanks<a hidden class=anchor aria-hidden=true href=#thanks>#</a></h2><p>Many thanks to <a href=https://twitter.com/codewithanthony>Anthony</a> for creating this and many other invaluable tools,
and many thanks for being helpful on so many occasions.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/all-repos/>all-repos</a></li><li><a href=https://jugmac00.github.io/tags/github/>github</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://jugmac00.github.io>Jürgen Gmach</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>