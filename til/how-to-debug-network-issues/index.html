<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Debug Network Issues | Jürgen Gmach</title><meta name=keywords content="linux,dns,network,suse"><meta name=description content="Unlike I stated earlier today&mldr;
 It’s not DNS
There’s no way it’s DNS
It was DNS
 &mldr; this time it was not DNS. But let&rsquo;s start from the beginning.
two lonely OpenSUSE virtual machines I inherited two OpenSUSE VMs from a departing colleague.
After changing passwords and cataloging what services are installed, I tried to update the VMs&mldr; and got the following errors&mldr;
# zypper refresh Problem retrieving files from 'Haupt-Repository (NON-OSS)'."><meta name=author content><link rel=canonical href=https://jugmac00.github.io/til/how-to-debug-network-issues/><link crossorigin=anonymous href=/assets/css/stylesheet.min.309a3942f890eb0930959205be1f692b2f0e85115a8b0190361a25a37e54fffa.css integrity="sha256-MJo5QviQ6wkwlZIFvh9pKy8OhRFaiwGQNholo35U//o=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://jugmac00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jugmac00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jugmac00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jugmac00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jugmac00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.82.0"><meta property="og:title" content="How to Debug Network Issues"><meta property="og:description" content="Unlike I stated earlier today&mldr;
 It’s not DNS
There’s no way it’s DNS
It was DNS
 &mldr; this time it was not DNS. But let&rsquo;s start from the beginning.
two lonely OpenSUSE virtual machines I inherited two OpenSUSE VMs from a departing colleague.
After changing passwords and cataloging what services are installed, I tried to update the VMs&mldr; and got the following errors&mldr;
# zypper refresh Problem retrieving files from 'Haupt-Repository (NON-OSS)'."><meta property="og:type" content="article"><meta property="og:url" content="https://jugmac00.github.io/til/how-to-debug-network-issues/"><meta property="article:section" content="til"><meta property="article:published_time" content="2021-07-06T15:05:06+02:00"><meta property="article:modified_time" content="2021-07-06T15:05:06+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to Debug Network Issues"><meta name=twitter:description content="Unlike I stated earlier today&mldr;
 It’s not DNS
There’s no way it’s DNS
It was DNS
 &mldr; this time it was not DNS. But let&rsquo;s start from the beginning.
two lonely OpenSUSE virtual machines I inherited two OpenSUSE VMs from a departing colleague.
After changing passwords and cataloging what services are installed, I tried to update the VMs&mldr; and got the following errors&mldr;
# zypper refresh Problem retrieving files from 'Haupt-Repository (NON-OSS)'."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Today I Learned","item":"https://jugmac00.github.io/til/"},{"@type":"ListItem","position":3,"name":"How to Debug Network Issues","item":"https://jugmac00.github.io/til/how-to-debug-network-issues/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to Debug Network Issues","name":"How to Debug Network Issues","description":"Unlike I stated earlier today\u0026hellip;\n It’s not DNS\nThere’s no way it’s DNS\nIt was DNS\n \u0026hellip; this time it was not DNS. But let\u0026rsquo;s start from the beginning.\ntwo lonely OpenSUSE virtual machines I inherited two OpenSUSE VMs from a departing colleague.\nAfter changing passwords and cataloging what services are installed, I tried to update the VMs\u0026hellip; and got the following errors\u0026hellip;\n# zypper refresh Problem retrieving files from \u0026#39;Haupt-Repository (NON-OSS)\u0026#39;.","keywords":["linux","dns","network","suse"],"articleBody":"Unlike I stated earlier today…\n It’s not DNS\nThere’s no way it’s DNS\nIt was DNS\n … this time it was not DNS. But let’s start from the beginning.\ntwo lonely OpenSUSE virtual machines I inherited two OpenSUSE VMs from a departing colleague.\nAfter changing passwords and cataloging what services are installed, I tried to update the VMs… and got the following errors…\n# zypper refresh Problem retrieving files from 'Haupt-Repository (NON-OSS)'. Download (curl) error for 'http://download.opensuse.org/tumbleweed/repo/non-oss/repodata/repomd.xml': Error code: Connection failed Error message: Please see the above error message for a hint. Skipping repository 'Haupt-Repository (NON-OSS)' because of the above error. At first I thought that maybe the repository URLs are out of date, but they are ok, and I can access them in the browser.\nsome network problems ahead Ok, let’s ping a host…\n# ping www.google.de ping: connect: Network is unreachable Let’s have a look whether a DNS server is configured…\ncat /etc/resolv.conf ### Call \"netconfig update -f\" to force adjusting of /etc/resolv.conf. nameserver 192.168.1.220 Looks good.\nLet’s see whether the DNS server can be pinged…\n# ping 192.168.1.220 PING 192.168.1.220 (192.168.1.220) 56(84) bytes of data. 64 bytes from 192.168.1.220: icmp_seq=1 ttl=64 time=0.251 ms 64 bytes from 192.168.1.220: icmp_seq=2 ttl=64 time=0.247 ms ... Okay, looks good.\nLet’s dig google…\n# dig www.google.de ;  DiG 9.16.6  www.google.de ;; global options: +cmd ;; Got answer: ;; -HEADERde: QUERY, status: NOERROR, id: 31174 ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1 ;; OPT PSEUDOSECTION: ; EDNS: version: 0, flags:; udp: 4096 ; COOKIE: 5d52301444dda5910100000060e45814feffe9a478a3b819 (good) ;; QUESTION SECTION: ;www.google.de.\tIN\tA ;; ANSWER SECTION: www.google.de.\t296\tIN\tA\t142.250.74.195 ;; Query time: 4 msec ;; SERVER: 192.168.1.220#53(192.168.1.220) ;; WHEN: Tue Jul 06 15:18:12 CEST 2021 ;; MSG SIZE rcvd: 86 Hm, this also works…\nMaybe the network is misconfigured?\n2: ens192:  mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:50:56:9c:74:bd brd ff:ff:ff:ff:ff:ff altname enp11s0 inet 192.168.1.27/24 brd 192.168.1.255 scope global ens192 valid_lft forever preferred_lft forever inet6 fe80::250:56ff:fe9c:74bd/64 scope link valid_lft forever preferred_lft forever Looks okay, too.\n Narrator: The author starts scratching his head.\n the missing piece I got the crucial hint from Chaotenchaos, in the most minimal way of communication :-)\n route -n\n gaia:~ # route -n Kernel IP routing table Destination Gateway Genmask Flags Metric Ref Use Iface 172.17.0.0 0.0.0.0 255.255.0.0 U 0 0 0 docker0 172.18.0.0 0.0.0.0 255.255.0.0 U 0 0 0 br-aac7f7b32b3d 172.19.0.0 0.0.0.0 255.255.0.0 U 0 0 0 br-22d0066bc0ac 192.168.1.0 0.0.0.0 255.255.255.0 U 0 0 0 ens192 Oh yeah, there is something missing… the default route!!\nLet’s add a new default gateway …\nroute add default gw 192.168.1.1 ens192 ping google.de immediately worked.\npermanent solution As you may know, route add ... is not a permanent change.\nAfter a reboot or a sudo service network restart the changes are lost.\nFor OpenSUSE you need to add the configuration in /etc/sysconfig/network/routes, in the form of…\n# Destination Gateway Netmask Interface e.g.\ndefault 192.168.1.1 - ens192 Mission completed!\nalmost The second OpenSUSE VM had no route command installed.\nOk, let’s install it quickly… except I can’t install anything as I cannot access the Internet :-/\nOk, let’s add a temporary route …\n# route add default gw 192.168.1.1 ens192 … except there is no route command available :-o\nroute and a couple of other network commands are deprecated, and most of them are replaced by the mighty ip command.\nInstead of route add... I used …\n# ip route add default via 192.168.1.1 Also, instead of route -n to show all available routes, you can use ip route.\nInterestingly, there was no /etc/sysconfig/network/routes file. Creating it and adding the default gateway worked, though.\nMission completed … this time for real!\n","wordCount":"623","inLanguage":"en","datePublished":"2021-07-06T15:05:06+02:00","dateModified":"2021-07-06T15:05:06+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jugmac00.github.io/til/how-to-debug-network-issues/"},"publisher":{"@type":"Organization","name":"Jürgen Gmach","logo":{"@type":"ImageObject","url":"https://jugmac00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://jugmac00.github.io accesskey=h title="Jürgen Gmach (Alt + H)">Jürgen Gmach</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://jugmac00.github.io/about/ title=about><span>about</span></a></li><li><a href=https://jugmac00.github.io/blog/ title=blog><span>blog</span></a></li><li><a href=https://jugmac00.github.io/til/ title=til><span>today-i-learned</span></a></li><li><a href=https://jugmac00.github.io/talks/ title=talks><span>talks</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>How to Debug Network Issues</h1><div class=post-meta>July 6, 2021</div></header><div class=post-content><p>Unlike I <a href=https://jugmac00.github.io/til/how-to-check-configuration-for-bind/>stated earlier today</a>&mldr;</p><blockquote><p>It’s not DNS<br>There’s no way it’s DNS<br>It was DNS</p></blockquote><p>&mldr; this time it was not DNS. But let&rsquo;s start from the beginning.</p><h2 id=two-lonely-opensuse-virtual-machines>two lonely OpenSUSE virtual machines<a hidden class=anchor aria-hidden=true href=#two-lonely-opensuse-virtual-machines>#</a></h2><p>I inherited two OpenSUSE VMs from a departing colleague.</p><p>After changing passwords and cataloging what services are installed,
I tried to update the VMs&mldr; and got the following errors&mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># zypper refresh</span>
Problem retrieving files from <span style=color:#e6db74>&#39;Haupt-Repository (NON-OSS)&#39;</span>.
Download <span style=color:#f92672>(</span>curl<span style=color:#f92672>)</span> error <span style=color:#66d9ef>for</span> <span style=color:#e6db74>&#39;http://download.opensuse.org/tumbleweed/repo/non-oss/repodata/repomd.xml&#39;</span>:
Error code: Connection failed
Error message: 

Please see the above error message <span style=color:#66d9ef>for</span> a hint.
Skipping repository <span style=color:#e6db74>&#39;Haupt-Repository (NON-OSS)&#39;</span> because of the above error.
</code></pre></div><p>At first I thought that maybe the repository URLs are out of date,
but they are ok, and I can access them in the browser.</p><h2 id=some-network-problems-ahead>some network problems ahead<a hidden class=anchor aria-hidden=true href=#some-network-problems-ahead>#</a></h2><p>Ok, let&rsquo;s ping a host&mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># ping www.google.de</span>
ping: connect: Network is unreachable
</code></pre></div><p>Let&rsquo;s have a look whether a DNS server is configured&mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat /etc/resolv.conf

<span style=color:#75715e>### Call &#34;netconfig update -f&#34; to force adjusting of /etc/resolv.conf.</span>
nameserver 192.168.1.220
</code></pre></div><p>Looks good.</p><p>Let&rsquo;s see whether the DNS server can be pinged&mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># ping 192.168.1.220</span>
PING 192.168.1.220 <span style=color:#f92672>(</span>192.168.1.220<span style=color:#f92672>)</span> 56<span style=color:#f92672>(</span>84<span style=color:#f92672>)</span> bytes of data.
<span style=color:#ae81ff>64</span> bytes from 192.168.1.220: icmp_seq<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> ttl<span style=color:#f92672>=</span><span style=color:#ae81ff>64</span> time<span style=color:#f92672>=</span>0.251 ms
<span style=color:#ae81ff>64</span> bytes from 192.168.1.220: icmp_seq<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span> ttl<span style=color:#f92672>=</span><span style=color:#ae81ff>64</span> time<span style=color:#f92672>=</span>0.247 ms
...
</code></pre></div><p>Okay, looks good.</p><p>Let&rsquo;s <code>dig</code> google&mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># dig www.google.de</span>

; &lt;&lt;&gt;&gt; DiG 9.16.6 &lt;&lt;&gt;&gt; www.google.de
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER<span style=color:#e6db74>&lt;&lt;- opco</span>de: QUERY, status: NOERROR, id: <span style=color:#ae81ff>31174</span>
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: <span style=color:#ae81ff>1</span>

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: <span style=color:#ae81ff>4096</span>
; COOKIE: 5d52301444dda5910100000060e45814feffe9a478a3b819 <span style=color:#f92672>(</span>good<span style=color:#f92672>)</span>
;; QUESTION SECTION:
;www.google.de.			IN	A

;; ANSWER SECTION:
www.google.de.		296	IN	A	142.250.74.195

;; Query time: <span style=color:#ae81ff>4</span> msec
;; SERVER: 192.168.1.220#53<span style=color:#f92672>(</span>192.168.1.220<span style=color:#f92672>)</span>
;; WHEN: Tue Jul <span style=color:#ae81ff>06</span> 15:18:12 CEST <span style=color:#ae81ff>2021</span>
;; MSG SIZE  rcvd: <span style=color:#ae81ff>86</span>

</code></pre></div><p>Hm, this also works&mldr;</p><p>Maybe the network is misconfigured?</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>2: ens192: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span style=color:#ae81ff>1500</span> qdisc pfifo_fast state UP group default qlen <span style=color:#ae81ff>1000</span>
    link/ether 00:50:56:9c:74:bd brd ff:ff:ff:ff:ff:ff
    altname enp11s0
    inet 192.168.1.27/24 brd 192.168.1.255 scope global ens192
       valid_lft forever preferred_lft forever
    inet6 fe80::250:56ff:fe9c:74bd/64 scope link 
       valid_lft forever preferred_lft forever
</code></pre></div><p>Looks okay, too.</p><blockquote><p>Narrator: The author starts scratching his head.</p></blockquote><h2 id=the-missing-piece>the missing piece<a hidden class=anchor aria-hidden=true href=#the-missing-piece>#</a></h2><p>I got the crucial hint from <a href=https://twitter.com/chaotenchaos>Chaotenchaos</a>,
in the most minimal way of communication :-)</p><blockquote><p>route -n</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gaia:~ <span style=color:#75715e># route -n</span>
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
172.17.0.0      0.0.0.0         255.255.0.0     U     <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span>        <span style=color:#ae81ff>0</span> docker0
172.18.0.0      0.0.0.0         255.255.0.0     U     <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span>        <span style=color:#ae81ff>0</span> br-aac7f7b32b3d
172.19.0.0      0.0.0.0         255.255.0.0     U     <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span>        <span style=color:#ae81ff>0</span> br-22d0066bc0ac
192.168.1.0     0.0.0.0         255.255.255.0   U     <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span>        <span style=color:#ae81ff>0</span> ens192
</code></pre></div><p>Oh yeah, there is something missing&mldr; the default route!!</p><p>Let&rsquo;s add a new default gateway &mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>route add default gw 192.168.1.1 ens192
</code></pre></div><p><code>ping google.de</code> immediately worked.</p><h2 id=permanent-solution>permanent solution<a hidden class=anchor aria-hidden=true href=#permanent-solution>#</a></h2><p>As you may know, <code>route add ...</code> is not a permanent change.</p><p>After a reboot or a <code>sudo service network restart</code> the changes are lost.</p><p>For OpenSUSE you need to add the configuration in <code>/etc/sysconfig/network/routes</code>,
in the form of&mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># Destination    Gateway    Netmask    Interface</span>
</code></pre></div><p>e.g.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>default    192.168.1.1    -    ens192
</code></pre></div><p>Mission completed!</p><h2 id=almost>almost<a hidden class=anchor aria-hidden=true href=#almost>#</a></h2><p>The second OpenSUSE VM had no <code>route</code> command installed.</p><p>Ok, let&rsquo;s install it quickly&mldr;
except I can&rsquo;t install anything as I cannot access the Internet :-/</p><p>Ok, let&rsquo;s add a temporary route &mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># route add default gw 192.168.1.1 ens192</span>
</code></pre></div><p>&mldr; except there is no <code>route</code> command available :-o</p><p><code>route</code> and a couple of other network commands are deprecated,
and most of them are replaced by the mighty <code>ip</code> command.</p><p>Instead of <code>route add...</code> I used &mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># ip route add default via 192.168.1.1</span>
</code></pre></div><p>Also, instead of <code>route -n</code> to show all available routes,
you can use <code>ip route</code>.</p><p>Interestingly, there was no <code>/etc/sysconfig/network/routes</code> file.
Creating it and adding the default gateway worked, though.</p><p>Mission completed &mldr; this time for real!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/linux/>linux</a></li><li><a href=https://jugmac00.github.io/tags/dns/>dns</a></li><li><a href=https://jugmac00.github.io/tags/network/>network</a></li><li><a href=https://jugmac00.github.io/tags/suse/>suse</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://jugmac00.github.io>Jürgen Gmach</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>