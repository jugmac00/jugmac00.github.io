<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Run a Bash Script in a Sane Way | Jürgen Gmach</title><meta name=keywords content="bash"><meta name=description content="When you never had problems with running/debugging a bash script, you might wonder what I am talking about.
Instead of introducing the possible problems, and then the way to counter them, let&rsquo;s start with the solution.
All your bash scripts should probably start with&mldr;
#!/usr/bin/env bash &mldr; wait&mldr; it goes on&mldr;
set -euxo pipefail Wat? Ok, let&rsquo;s go through the options, one by one.
set -e This makes a bash script to stop on error immediately, and exit."><meta name=author content><link rel=canonical href=https://jugmac00.github.io/til/how-to-run-a-bash-script-in-a-sane-way/><link crossorigin=anonymous href=/assets/css/stylesheet.96771a12b249af1ff464eabdaa85d1a5268a4379a9f2da62cfd409656ff0233b.css integrity="sha256-lncaErJJrx/0ZOq9qoXRpSaKQ3mp8tpiz9QJZW/wIzs=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://jugmac00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jugmac00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jugmac00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jugmac00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jugmac00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="How to Run a Bash Script in a Sane Way"><meta property="og:description" content="When you never had problems with running/debugging a bash script, you might wonder what I am talking about.
Instead of introducing the possible problems, and then the way to counter them, let&rsquo;s start with the solution.
All your bash scripts should probably start with&mldr;
#!/usr/bin/env bash &mldr; wait&mldr; it goes on&mldr;
set -euxo pipefail Wat? Ok, let&rsquo;s go through the options, one by one.
set -e This makes a bash script to stop on error immediately, and exit."><meta property="og:type" content="article"><meta property="og:url" content="https://jugmac00.github.io/til/how-to-run-a-bash-script-in-a-sane-way/"><meta property="article:section" content="til"><meta property="article:published_time" content="2021-04-29T18:48:26+02:00"><meta property="article:modified_time" content="2021-04-29T18:48:26+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to Run a Bash Script in a Sane Way"><meta name=twitter:description content="When you never had problems with running/debugging a bash script, you might wonder what I am talking about.
Instead of introducing the possible problems, and then the way to counter them, let&rsquo;s start with the solution.
All your bash scripts should probably start with&mldr;
#!/usr/bin/env bash &mldr; wait&mldr; it goes on&mldr;
set -euxo pipefail Wat? Ok, let&rsquo;s go through the options, one by one.
set -e This makes a bash script to stop on error immediately, and exit."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Today I Learned","item":"https://jugmac00.github.io/til/"},{"@type":"ListItem","position":3,"name":"How to Run a Bash Script in a Sane Way","item":"https://jugmac00.github.io/til/how-to-run-a-bash-script-in-a-sane-way/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to Run a Bash Script in a Sane Way","name":"How to Run a Bash Script in a Sane Way","description":"When you never had problems with running/debugging a bash script, you might wonder what I am talking about.\nInstead of introducing the possible problems, and then the way to counter them, let\u0026rsquo;s start with the solution.\nAll your bash scripts should probably start with\u0026hellip;\n#!/usr/bin/env bash \u0026hellip; wait\u0026hellip; it goes on\u0026hellip;\nset -euxo pipefail Wat? Ok, let\u0026rsquo;s go through the options, one by one.\nset -e This makes a bash script to stop on error immediately, and exit.","keywords":["bash"],"articleBody":"When you never had problems with running/debugging a bash script, you might wonder what I am talking about.\nInstead of introducing the possible problems, and then the way to counter them, let’s start with the solution.\nAll your bash scripts should probably start with…\n#!/usr/bin/env bash … wait… it goes on…\nset -euxo pipefail Wat? Ok, let’s go through the options, one by one.\nset -e This makes a bash script to stop on error immediately, and exit.\nSounds like this should be the default, and that is the way it is in Python, but well, in bash you need to activate this error mode, otherwise the bash script just continues with the next line and you will possibly receive something you did not expect!\nset -u This makes the bash script error on uninitialized variables!\nIf you do not set this, echo hello $name just gives hello  - which you probably do not want.\nset -o pipefail This makes bash fail when any of the commands in a pipe fail, not only when the last one fails.\nset -x This makes bash print the commands before executing them, making debugging much, much easier.\nYou can also specify -x when executing the command like …\n❯ bash -x -c \"echo hi\" + echo hi hi thanks Once more, thanks to Anthony Sottile, from whom I learned this in his excellent video.\n","wordCount":"231","inLanguage":"en","datePublished":"2021-04-29T18:48:26+02:00","dateModified":"2021-04-29T18:48:26+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jugmac00.github.io/til/how-to-run-a-bash-script-in-a-sane-way/"},"publisher":{"@type":"Organization","name":"Jürgen Gmach","logo":{"@type":"ImageObject","url":"https://jugmac00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://jugmac00.github.io accesskey=h title="Jürgen Gmach (Alt + H)">Jürgen Gmach</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://jugmac00.github.io/about/ title=about><span>about</span></a></li><li><a href=https://jugmac00.github.io/blog/ title=blog><span>blog</span></a></li><li><a href=https://jugmac00.github.io/til/ title=til><span>today-i-learned</span></a></li><li><a href=https://jugmac00.github.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://jugmac00.github.io/hiring/ title=hiring><span>hiring</span></a></li><li><a href=https://jugmac00.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>How to Run a Bash Script in a Sane Way</h1><div class=post-meta><span title="2021-04-29 18:48:26 +0200 +0200">April 29, 2021</span></div></header><div class=post-content><p>When you never had problems with running/debugging a bash script,
you might wonder what I am talking about.</p><p>Instead of introducing the possible problems,
and then the way to counter them, let&rsquo;s start with the solution.</p><p>All your bash scripts should probably start with&mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e>#!/usr/bin/env bash
</span></code></pre></div><p>&mldr; wait&mldr; it goes on&mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>set -euxo pipefail
</code></pre></div><h2 id=wat>Wat?<a hidden class=anchor aria-hidden=true href=#wat>#</a></h2><p>Ok, let&rsquo;s go through the options, one by one.</p><h3 id=set--e><code>set -e</code><a hidden class=anchor aria-hidden=true href=#set--e>#</a></h3><p>This makes a bash script to stop on error immediately, and exit.</p><p>Sounds like this should be the default,
and that is the way it is in Python,
but well,
in bash you need to activate this <code>error mode</code>,
otherwise the bash script just continues with the next line and you will possibly receive something you did not expect!</p><h3 id=set--u><code>set -u</code><a hidden class=anchor aria-hidden=true href=#set--u>#</a></h3><p>This makes the bash script error on uninitialized variables!</p><p>If you do not set this,
<code>echo hello $name</code> just gives <code>hello</code> - which you probably do not want.</p><h3 id=set--o-pipefail><code>set -o pipefail</code><a hidden class=anchor aria-hidden=true href=#set--o-pipefail>#</a></h3><p>This makes bash fail when any of the commands in a pipe fail,
not only when the last one fails.</p><h3 id=set--x><code>set -x</code><a hidden class=anchor aria-hidden=true href=#set--x>#</a></h3><p>This makes bash print the commands before executing them,
making debugging much, much easier.</p><p>You can also specify <code>-x</code> when executing the command like &mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>❯ bash -x -c <span style=color:#e6db74>&#34;echo hi&#34;</span>
+ echo hi
hi
</code></pre></div><h2 id=thanks>thanks<a hidden class=anchor aria-hidden=true href=#thanks>#</a></h2><p>Once more, thanks to <a href=https://twitter.com/codewithanthony>Anthony Sottile</a>,
from whom I learned this in his <a href="https://www.youtube.com/watch?v=9fSkygQ-ZjI">excellent video</a>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://jugmac00.github.io/tags/bash/>bash</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://jugmac00.github.io>Jürgen Gmach</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>